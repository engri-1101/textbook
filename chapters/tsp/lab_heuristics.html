
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2.2. Lab: Heuristics &#8212; Data Science and Decision Making: An Elementary Introduction to Modeling and Optimization</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.3. Lab: 2-OPT" href="lab_2opt.html" />
    <link rel="prev" title="2.1. Pre-Lab" href="prelab.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Data Science and Decision Making: An Elementary Introduction to Modeling and Optimization</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/what_is_or.html">
   What is Operations Research?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/python_intro.html">
   Introduction to Python and Mathematical Syntax
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Textbook
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="intro1.html">
   1. The Traveling Salesman Problem
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="model1.html">
     1.1. Mathematical Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="algorithms1.html">
     1.2. Solving a Problem – Algorithms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tsp_modeling1.html">
     1.3. Modeling with the Traveling Salesman Problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="vsli1.html">
     1.4. Etching VLSI Computer Chips
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="intro2.html">
   2. The Traveling Salesman Problem
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="prelab.html">
     2.1. Pre-Lab
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     2.2. Lab: Heuristics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lab_2opt.html">
     2.3. Lab: 2-OPT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="demo2.html">
     2.4. Demo: Radio Telescope
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lab_drilling.html">
     2.5. Lab: PCB Drilling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lab_etching.html">
     2.6. Lab: PCB Etching
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/engri-1101/textbook/textbook?urlpath=tree/src/chapters/tsp/lab_heuristics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/engri-1101/textbook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/engri-1101/textbook/issues/new?title=Issue%20on%20page%20%2Fchapters/tsp/lab_heuristics.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/engri-1101/textbook/edit/textbook/src/chapters/tsp/lab_heuristics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/chapters/tsp/lab_heuristics.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Lab: Heuristics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="lab-heuristics">
<h1><span class="section-number">2.2. </span>Lab: Heuristics<a class="headerlink" href="#lab-heuristics" title="Permalink to this headline">#</a></h1>
<p>A <em>heuristic</em> aims to find a good feasible solution to a problem although it is not guaranteed to be optimal. We will consider 4 different TSP heuristics. Before we move on, we will abstract the TSP to finding an optimal tour on a set of <em>nodes</em> rather than cities. These nodes could represent anything.</p>
<ul class="simple">
<li><p><strong>Random Neighbor:</strong> Start at some node. Randomly select one of the nodes which has not been visited to visit next. Continue doing so until all nodes have been visited. Return to the start.</p></li>
<li><p><strong>Nearest Neighbor:</strong> Start at some node. Visit the closest unvisited node next (if there are multiple closest nodes, choose one randomly). Continue doing so until all nodes have been visited. Return to the start.</p></li>
<li><p><strong>Nearest Insertion:</strong> Start with a “tour” on two of the nodes (e.g., the closest pair of nodes). Find the closest unvisited node to any node currently in tour. Insert the node into the tour at the best place (if there are multiple closest nodes, choose one to add randomly).</p></li>
<li><p><strong>Furthest Insertion:</strong> Start with a “tour” on two of the nodes (e.g., the closest pair of nodes). Find the node whose smallest distance to a node already in the tour is maximized. Insert the node into the tour at the best place (if there are multiple furthest nodes, choose one to add randomly).</p></li>
</ul>
<p><strong>Q:</strong> Which heuristic to you expect to perform the best? Which do you expect to perform the worst?</p>
<p><strong>A:</strong></p>
<p>To compare the heuristics, we will use a simple 6x8 grid of nodes. The cell below creates this instance. Note that we will initally use the manhattan distance.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># nodes is the list of nodes and their position and G is the distance matrix</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">grid_instance</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">manhattan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s use random neighbor (a terrible heuristic) to get a baseline for the length of a tour. We will use a function called <code class="docutils literal notranslate"><span class="pre">plot_tsp_heuristic</span></code> to see the mechanics of the algorithm. Run the cell and use the <code class="docutils literal notranslate"><span class="pre">Previous</span></code> and <code class="docutils literal notranslate"><span class="pre">Next</span></code> buttons to move through the iterations of the algorithm. The tour cost will update in the bottom-left. <code class="docutils literal notranslate"><span class="pre">done.</span></code> will appear in the bottom-right when the heuristic has finished.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tsp_heuristic_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;random_neighbor&#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>To view the complete tour right away, we can use the function <code class="docutils literal notranslate"><span class="pre">random_neighbor</span></code> to run the random neighbor heuristic and the function <code class="docutils literal notranslate"><span class="pre">plot_tour</span></code> to plot the tour and its cost in the lower-left.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tour</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">random_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="c1"># tour is an ordered list of the nodes starting and ending at the same node</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tour</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tour_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">tour</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> Does this look like a good tour to you? Run it a few times and see what the average tour cost is.</p>
<div class="toggle docutils container">
<p><strong>A:</strong> No. Average around 230.</p>
</div>
<p>Now, let’s look at the nearest neighbor heuristic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tsp_heuristic_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;nearest_neighbor&#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> As you iterate through, examine the “choices” made by the algorithm at each step. What does it do well? What does it do poorly?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> It does better than random neighbor because it often moves to a node close to the one it is currently on. However, it can essentially box itself out of certain regions of the graph. In the end, it often has to make lengthy jumps to get nodes it missed along the way.</p>
</div>
<p><strong>Q:</strong> Run this a few times. Do you get the same tour every time? Why or why not?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> No, because if there are multiple choices for the closest node, one is chosen randomly.</p>
</div>
<p>Now, let’s look at the nearest insertion heuristic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tsp_heuristic_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;nearest_insertion&#39;</span><span class="p">,</span> <span class="n">initial_tour</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> Run this a few times. How does is compare to the previous heuristics?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> This is the best heuristic yet. By starting with a small tour and expanding it, the boxing out issue nearest neighbor experienced is reduced.</p>
</div>
<p>Now, let’s look at the furthest insertion heuristic.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tsp_heuristic_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s1">&#39;furthest_insertion&#39;</span><span class="p">,</span> <span class="n">initial_tour</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> Run this a few times. How does is compare to the previous heuristics?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> This heuristic is comparable to nearest insertion although there may be certain circumstanes where one would be more likely to outperform the other.</p>
</div>
<p>To compare the heuristics further, lets run each on the 6x8 grid say, 250 times.</p>
<p><strong>Q:</strong> Now that you have seen each heuristic, which do you think will do the best and which will do the worst?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> Random neighbor will do the worst and either nearest or furthest insertion will do the best.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">random_neighbor_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nearest_neighbor_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nearest_insertion_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">furthest_insertion_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">random_neighbor_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">random_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">nearest_neighbor_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">nearest_insertion_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">furthest_insertion_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">furthest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Heuristic Averages:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Random Neighbor: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">random_neighbor_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nearest Neighbor: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nearest_neighbor_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nearest Insertion: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nearest_insertion_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Furthest Insertion: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">furthest_insertion_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> What were the results? Was this what you expected?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> Random neighbor did significantly worse. Furthest insertion did the best with nearest insertion and nearest neighbor not to much worse. This was what I expected.</p>
</div>
<p>Let’s look at 9x9 grid using the euclidian distance now. Run each of the cells below to see each heuristic executed on the new instance.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">grid_instance</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">manhattan</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tour</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">random_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tour_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">tour</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show(vl.tsp_heuristic_plot(G, &#39;nearest_neighbor&#39;, i=0))</span>
<span class="n">tour</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tour_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">tour</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show(vl.tsp_heuristic_plot(G, &#39;nearest_insertion&#39;, initial_tour=[0,1,0]))</span>
<span class="n">tour</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">initial_tour</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tour_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">tour</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show(vl.tsp_heuristic_plot(G, &#39;furthest_insertion&#39;, initial_tour=[0,80,0]))</span>
<span class="n">tour</span> <span class="o">=</span> <span class="n">vl</span><span class="o">.</span><span class="n">furthest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">initial_tour</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">show</span><span class="p">(</span><span class="n">vl</span><span class="o">.</span><span class="n">tour_plot</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">tour</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> How did the results compare to the 6x8 grid using manhattan distances?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> Similar.</p>
</div>
<p>Again, let’s run each heuristic numerous times and see how they compare.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">random_neighbor_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nearest_neighbor_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">nearest_insertion_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">furthest_insertion_total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">random_neighbor_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">random_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">nearest_neighbor_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_neighbor</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">nearest_insertion_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">nearest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
    <span class="n">furthest_insertion_total</span> <span class="o">+=</span> <span class="n">vl</span><span class="o">.</span><span class="n">tour_cost</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">vl</span><span class="o">.</span><span class="n">furthest_insertion</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Heuristic Averages:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Random Neighbor: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">random_neighbor_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nearest Neighbor: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nearest_neighbor_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nearest Insertion: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nearest_insertion_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Furthest Insertion: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">furthest_insertion_total</span> <span class="o">/</span> <span class="n">n</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Q:</strong> How did the results compare to the 6x8 grid using manhattan distances?</p>
<div class="toggle docutils container">
<p><strong>A:</strong> Similar.</p>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "engri-1101/textbook",
            ref: "textbook",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters\tsp"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="prelab.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">2.1. </span>Pre-Lab</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="lab_2opt.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2.3. </span>Lab: 2-OPT</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By David B. Shmoys, Samuel C. Gutekunst, Frans Schalekamp, and David P. Williamson<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>