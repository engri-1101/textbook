



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>Bokeh Plot</title>
      
      
        
          
        
        
          
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.3.2.min.js" integrity="sha384-XypntL49z55iwGVUW4qsEu83zKL3XEcz0MjuGOQ9SlaaQ68X/g+k1FcioZi7oQAc" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.3.2.min.js" integrity="sha384-TX0gSQTdXTTeScqxj6PVQxTiRW8DOoGVwinyi1D3kxv7wuxQ02XkOxv0xwiypcAH" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.3.2.min.js" integrity="sha384-bEsM86IHGDTLCS0Zod8a8WM6Y4+lafAL/eSiyQcuPzinmWNgNO2/olUF0Z2Dkn5i" crossorigin="anonymous"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="741bbcb6-f2c3-4b1c-aa3d-664b1370f6c3" data-root-id="1739"></div>
            
          
        
      
      
        <script type="application/json" id="3001">
          {"dce3c7f4-2084-4b08-ac63-e1708c3c71ef":{"defs":[],"roots":{"references":[{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.87}},"id":"1454","type":"Line"},{"attributes":{},"id":"1613","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.87}},"id":"1455","type":"Line"},{"attributes":{"source":{"id":"1356"}},"id":"1457","type":"CDSView"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Left-Footed Kicker Kicking to the Middle Selection Chance","value":"0","visible":false},"id":"1502","type":"TextInput"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1459"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1460"},"view":{"id":"1462"}},"id":"1461","type":"GlyphRenderer"},{"attributes":{},"id":"1614","type":"Selection"},{"attributes":{"children":[{"id":"1738"},{"id":"1736"}],"sizing_mode":"stretch_width"},"id":"1739","type":"Column"},{"attributes":{"source":{"id":"1356"}},"id":"1462","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.65}},"id":"1460","type":"Line"},{"attributes":{},"id":"1641","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.65}},"id":"1459","type":"Line"},{"attributes":{"button_type":"warning","icon":null,"js_event_callbacks":{"menu_item_click":[{"id":"1539"}]},"label":"CPU strategy to Use","menu":[["Fictitious_Play","Fictitious_Play"],["Mixed_Strategy","Mixed_Strategy"],["Random","Random"],["Goalie_Cheats","Goalie_Cheats"]],"sizing_mode":"stretch_width","visible":false},"id":"1507","type":"Dropdown"},{"attributes":{"source":{"id":"1356"}},"id":"1467","type":"CDSView"},{"attributes":{},"id":"1627","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.61}},"id":"1464","type":"Line"},{"attributes":{"callback":null,"formatters":{"@avgs_placeholder":{"id":"1469"},"@ys":{"id":"1468"}},"point_policy":"follow_mouse","renderers":[{"id":"1370"}],"tooltips":"\n&lt;div&gt;\n  &lt;font size=\"1pt\"&gt;&lt;p&gt;Iteration: @xs&lt;br&gt;\nStriker Foot: @feet&lt;br&gt;\nAim Direction: @directions&lt;br&gt;\nGoalie Action: @actions&lt;br&gt;\nScore Chance: @ys{custom}&lt;br&gt;\nAvg Score Chance: @avgs_placeholder{custom}&lt;/p&gt;&lt;/font&gt;\n&lt;/div&gt;\n"},"id":"1470","type":"HoverTool"},{"attributes":{},"id":"1634","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.61}},"id":"1465","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1464"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1465"},"view":{"id":"1467"}},"id":"1466","type":"GlyphRenderer"},{"attributes":{},"id":"1628","type":"Selection"},{"attributes":{},"id":"1635","type":"Selection"},{"attributes":{"args":{"advSpdSlider":{"id":"1500"},"aimTextInputs":[{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"}],"autoAdvButton":{"id":"1498"},"automateButton":{"id":"1489"},"automationTable":{"id":"1523"},"chancesNE1Tip":{"id":"1484"},"iterationsSlider":{"id":"1499"},"selectCpuTip":{"id":"1481"},"strategyDropdown":{"id":"1507"}},"code":"\n//Change visibilities of game items:\nautomateButton.visible = false;\naimTextInputs.forEach(\n  (v) =&gt; v.visible = true\n)\nautomationTable.visible = true;\nchancesNE1Tip.visible = true;\n\nstrategyDropdown.visible = true;\nselectCpuTip.visible = true;\n\nautoAdvButton.visible = true;\n\nadvSpdSlider.visible =  true;\n\niterationsSlider.visible = true;\n"},"id":"1526","type":"CustomJS"},{"attributes":{},"id":"1616","type":"Selection"},{"attributes":{"data":{"aim_direction":["Left","Middle","Right","Left","Middle","Right"],"chances":[0,0,0,0,0,0],"footedness":["Left","Left","Left","Right","Right","Right"]},"selected":{"id":"1635"},"selection_policy":{"id":"1634"}},"id":"1519","type":"ColumnDataSource"},{"attributes":{"args":{"src":{"id":"1356"}},"code":"\nconst index = special_vars.index;\nconst data = src.data;\n\nfunction avgRecursive(index) {\n  let val = data['ys'][index];\n  if(index &gt; 0) {\n    val += index * avgRecursive(index - 1);\n    val = val / (index + 1);\n  }\n  return val;\n}\n\nconst val = avgRecursive(index);\n\nreturn val.toString().substring(0,5);\n"},"id":"1469","type":"CustomJSHover"},{"attributes":{"text":"0","visible":false},"id":"1478","type":"Div"},{"attributes":{},"id":"1642","type":"Selection"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Left-Footed Kicker Kicking to the Left Selection Chance","value":"0","visible":false},"id":"1501","type":"TextInput"},{"attributes":{},"id":"1617","type":"UnionRenderers"},{"attributes":{"editor":{"id":"1592"},"field":"striker_score_roll","formatter":{"id":"1591"},"title":"Score Roll","width":74},"id":"1515","type":"TableColumn"},{"attributes":{"editor":{"id":"1660"},"field":"chances","formatter":{"id":"1659"},"title":"Chance"},"id":"1522","type":"TableColumn"},{"attributes":{"source":{"id":"1508"}},"id":"1518","type":"CDSView"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Left-Footed Kicker Kicking to the Right Selection Chance","value":"0","visible":false},"id":"1503","type":"TextInput"},{"attributes":{"editor":{"id":"1584"},"field":"freq","formatter":{"id":"1583"},"title":"Frequency","width":69},"id":"1511","type":"TableColumn"},{"attributes":{},"id":"1618","type":"Selection"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Right-Footed Kicker Kicking to the Left Selection Chance","value":"0","visible":false},"id":"1504","type":"TextInput"},{"attributes":{},"id":"1556","type":"BasicTickFormatter"},{"attributes":{"editor":{"id":"1656"},"field":"footedness","formatter":{"id":"1655"},"title":"Striker Footedness"},"id":"1520","type":"TableColumn"},{"attributes":{},"id":"1655","type":"StringFormatter"},{"attributes":{},"id":"1557","type":"AllLabels"},{"attributes":{},"id":"1656","type":"StringEditor"},{"attributes":{"editor":{"id":"1582"},"field":"aim_direction","formatter":{"id":"1581"},"title":"Aim Direction","width":84},"id":"1510","type":"TableColumn"},{"attributes":{},"id":"1619","type":"UnionRenderers"},{"attributes":{},"id":"1657","type":"StringFormatter"},{"attributes":{},"id":"1658","type":"StringEditor"},{"attributes":{"data":{"aim_direction":["Left","Middle","Right","Left","Middle","Right"],"decisions":[0,0,0,0,0,0],"footedness":["Left","Left","Left","Right","Right","Right"],"freq":[0,0,0,0,0,0],"goalie_perceived_risks":[0,0,0,0,0,0],"striker_score_chance":[0,0,0,0,0,0],"striker_score_roll":[0,0,0,0,0,0]},"selected":{"id":"1578"},"selection_policy":{"id":"1577"}},"id":"1508","type":"ColumnDataSource"},{"attributes":{"editor":{"id":"1588"},"field":"goalie_perceived_risks","formatter":{"id":"1587"},"title":"Perceived Risks","width":97},"id":"1513","type":"TableColumn"},{"attributes":{"editor":{"id":"1590"},"field":"striker_score_chance","formatter":{"id":"1589"},"title":"Score Chance","width":88},"id":"1514","type":"TableColumn"},{"attributes":{},"id":"1659","type":"StringFormatter"},{"attributes":{},"id":"1660","type":"StringEditor"},{"attributes":{"source":{"id":"1519"}},"id":"1525","type":"CDSView"},{"attributes":{},"id":"1620","type":"Selection"},{"attributes":{"editor":{"id":"1586"},"field":"decisions","formatter":{"id":"1585"},"title":"Decisions","width":64},"id":"1512","type":"TableColumn"},{"attributes":{"editor":{"id":"1658"},"field":"aim_direction","formatter":{"id":"1657"},"title":"Striker Aim Direction"},"id":"1521","type":"TableColumn"},{"attributes":{},"id":"1559","type":"BasicTickFormatter"},{"attributes":{"columns":[{"id":"1520"},{"id":"1521"},{"id":"1522"}],"height":280,"source":{"id":"1519"},"view":{"id":"1525"},"visible":false},"id":"1523","type":"DataTable"},{"attributes":{},"id":"1621","type":"UnionRenderers"},{"attributes":{},"id":"1560","type":"AllLabels"},{"attributes":{"args":{"advSpdSlider":{"id":"1500"},"aimTextInputs":[{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"}],"autoAdvButton":{"id":"1498"},"automationTable":{"id":"1523"},"ball":{"id":"1045"},"chancesSrc":{"id":"1519"},"counterSrc":{"id":"1529"},"distTable":{"id":"1516"},"distTableSrc":{"id":"1508"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"goalieBody":{"id":"1044"},"goalieHead":{"id":"1043"},"inAnIter":{"id":"1488"},"iterSlider":{"id":"1499"},"nextButton":{"id":"1491"},"nround":{"id":"1478"},"score":{"id":"1479"},"startButton":{"id":"1490"},"statsFig1":{"id":"1063"},"statsFig1Button":{"id":"1494"},"statsFig1Src":{"id":"1109"},"statsFig2":{"id":"1162"},"statsFig2Button":{"id":"1495"},"statsFig2Src":{"id":"1182"},"statsFig3":{"id":"1206"},"statsFig3Button":{"id":"1496"},"statsFig3Src":{"id":"1228"},"statsFig4":{"id":"1336"},"statsFig4Button":{"id":"1497"},"statsFig4Src":{"id":"1356"},"stratDropdown":{"id":"1507"},"stratToUseDiv":{"id":"1480"},"txt":{"id":"1472"}},"code":"\nfunction initialIterationAdjustments(){\n  /**\n  * A function for making initial adjustments for the iteration.\n  */\n  //Set references:\n  const fig2Data = statsFig2Src.data;\n  const fig3Data = statsFig3Src.data;\n  const fig4Data = statsFig4Src.data;\n\n  //Get iteration value:\n  const iterations = iterSlider.value;\n\n  //Set figure x range limits:\n  statsFig2.x_range.end = iterations + 0.5;\n  statsFig3.x_range.end = iterations + 0.5;\n  statsFig4.x_range.end = iterations + 0.5;\n\n  //Get array length:\n  const arrLength = iterations + 1;\n\n  //Create x Value Arrays for Sources:\n  const fig2Xs = new Array(arrLength).fill(0);\n  fig2Xs.forEach(\n    (v, i) =&gt; fig2Xs[i] = i\n  );\n  const fig3Xs = fig2Xs.slice();\n  const fig4Xs = fig2Xs.slice(1);\n\n  //Set Fig2 Source Values:\n  fig2Data['xs'] = fig2Xs;\n  fig2Data['ys'] = [0].concat(new Array(iterations));\n  fig2Data['chance_ys'] = [0].concat(new Array(iterations));\n  fig2Data['highlight_alphas'] = new Array(arrLength).fill(0);\n  fig2Data['heights'] = new Array(arrLength);\n\n  //Set Fig3 Source Values:\n  fig3Data['xs'] = fig3Xs;\n  //First values are manually calculated constants:\n  fig3Data['ll_ys'] = [0.760000].concat(new Array(iterations).fill(0));\n  fig3Data['lm_ys'] = [0.650000].concat(new Array(iterations).fill(0));\n  fig3Data['lr_ys'] = [0.763333].concat(new Array(iterations).fill(0));\n  fig3Data['rl_ys'] = [0.746666].concat(new Array(iterations).fill(0));\n  fig3Data['rm_ys'] = [0.660000].concat(new Array(iterations).fill(0));\n  fig3Data['rr_ys'] = [0.783333].concat(new Array(iterations).fill(0));\n  fig3Data['hb1'] = new Array(arrLength);\n  fig3Data['hb2'] = new Array(arrLength);\n  fig3Data['hb3'] = new Array(arrLength);\n  fig3Data['hb4'] = new Array(arrLength);\n  fig3Data['hb5'] = new Array(arrLength);\n  fig3Data['hb6'] = new Array(arrLength);\n  fig3Data['highlight_alphas'] = new Array(arrLength).fill(0);\n  fig3Data['alphas_zeroes'] = new Array(arrLength).fill(0);\n\n  //Set Fig4 Source Values:\n  fig4Data['xs'] = fig4Xs;\n  fig4Data['ys'] = new Array(iterations);\n  fig4Data['feet'] = new Array(iterations);\n  fig4Data['directions'] = new Array(iterations);\n  fig4Data['actions'] = new Array(iterations);\n  fig4Data['highlight_alphas'] = new Array(iterations).fill(0);\n  fig4Data['avgs_placeholder'] = new Array(iterations).fill(0);\n\n  statsFig2Src.change.emit();\n  statsFig3Src.change.emit();\n  statsFig4Src.change.emit();\n}\n\ninitialIterationAdjustments();\n\nstartButton.visible = false;\nnextButton.visible = true;\naimTextInputs.forEach(\n  (v) =&gt; v.visible = false\n)\niterSlider.visible = false;\nstratDropdown.visible = false;\nautomationTable.visible = false;\n\nconst rDict = {\n  'LeftLeft'   : 0.55, 'LeftMiddle'   : 0.65, 'LeftRight'   : 0.93,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.95, 'RightMiddle'  : 0.73, 'RightRight'  : 0.70\n};\nconst lDict = {\n  'LeftLeft'   : 0.67, 'LeftMiddle'   : 0.70, 'LeftRight'   : 0.96,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.87, 'RightMiddle'  : 0.65, 'RightRight'  : 0.61\n};\nconst scoreProbDicts = {\n  'Right' : rDict,\n  'Left'  : lDict\n};\n\nconst directions = ['Left', 'Middle', 'Right'];\n\nconst arrSumFunc = ((a, b) =&gt; a + b);\n\nconst chances = chancesSrc.data['chances'];\nconst distData = distTableSrc.data;\nconst freq = distData['freq'];\n\nfunction gameIter(){\n  const itersToRun = iterSlider.value;\n\n  const gameStrat = stratToUseDiv.text;\n\n  const stratIsFictPlay = (gameStrat === 'Fictitious_Play');\n\n  let perceivedRiskL;\n  let perceivedRiskM;\n  let perceivedRiskR;\n\n  let goalieAction = '';\n\n  let kickerFoot = '';\n  let kickerKick = '';\n\n  let goal = 0;\n  let gameScore = 0;\n  let roundsPlayed = 0;\n\n  let roundScoreChance = 0;\n\n  [kickerFoot, kickerKick] = rollKickerAction();\n\n  const footIsLeft = (kickerFoot === 'Left');\n  const footDict = scoreProbDicts[kickerFoot];\n  const kfRAdjust = (footIsLeft) ? 0 : 3;\n\n  switch(gameStrat) {\n    case 'Fictitious_Play':\n      [goalieAction, perceivedRiskL, perceivedRiskM, perceivedRiskR] = (\n        fictitiousPlay(footIsLeft, footDict)\n      );\n      break;\n    case 'Mixed_Strategy':\n      goalieAction = optimalMixed(kickerFoot);\n      break;\n    case 'Random':\n      goalieAction = randomChoice();\n      break;\n    case 'Goalie_Cheats':\n      goalieAction = goalieCheats(kickerFoot);\n      break;\n    default:\n      //TODO throw an error\n      break;\n  }\n\n  const directionsIndexGa = directions.indexOf(goalieAction); //DirectionsIndexGoalieAction\n  const actionsIndexKFKK = kfRAdjust + directions.indexOf(kickerKick); //Actions index KFKK\n\n  [goal, gameScore, roundsPlayed, roundScoreChance] = scoring(\n    footDict,\n    kickerKick,\n    goalieAction,\n    actionsIndexKFKK\n  );\n\n  const roundIsLastIter = (roundsPlayed &gt;= itersToRun);\n\n  animateIter(goalieAction, kickerKick, goal);\n\n  goalieDecisionTracking(\n    actionsIndexKFKK,\n    kfRAdjust,\n    directionsIndexGa,\n    stratIsFictPlay,\n    perceivedRiskL,\n    perceivedRiskM,\n    perceivedRiskR\n  );\n\n  updateFig1(goal, directionsIndexGa, actionsIndexKFKK, roundIsLastIter);\n\n  updateFig2(\n    roundsPlayed,\n    gameScore,\n    roundScoreChance,\n    roundIsLastIter,\n    itersToRun\n  );\n\n  if(stratIsFictPlay) { updateFig3(roundsPlayed, roundIsLastIter, itersToRun); }\n\n  updateFig4(\n    roundsPlayed,\n    roundScoreChance,\n    kickerFoot,\n    kickerKick,\n    goalieAction\n  );\n\n  if(roundIsLastIter) { handleFigVisibility(stratIsFictPlay); }\n\n  iterText(roundsPlayed, gameScore, goal);\n}\n\n//Setup the promise that enforces waiting for the delay to finish:\nconst iterationDelay = (\n  //Creates the promise with parameter ms:\n  (ms) =&gt; new Promise(\n    //Waits for ms seconds before resolving:\n    (resolve) =&gt; setTimeout(\n      () =&gt; {\n        resolve();\n      },\n      ms\n    )\n  )\n);\n\nasync function gameLoop(){\n  /**\n  * An async function that runs each iteration of the game. Recurses after a\n  * delay if the necessary conditions are fulfilled.\n  */\n  //Take value for if another iteration is running:\n  let tempIterVal = inAnIter.text;\n\n  //If there is not another iteration running:\n  if(tempIterVal === 'false'){\n    //Set the value of inAnIter to reflect that an iteration is now running:\n    inAnIter.text = 'true';\n\n    //Run the game iteration:\n    gameIter();\n\n    //Tell itself that it has finished running the iteration:\n    tempIterVal = 'false';\n\n    //True if not in the last iteration of the game:\n    const notLastRound = (parseInt(nround.text) &lt; iterSlider.value);\n\n    //True if the button is activated by the user:\n    const autoAdvActive = (autoAdvButton.active);\n\n    //True if both conditions are true:\n    const conditionsFulfilled = (notLastRound &amp;&amp; autoAdvActive);\n\n    //If all recursion conditions are fulfilled:\n    if(conditionsFulfilled){\n      //Await the delay, then recurse:\n      await iterationDelay(advSpdSlider.value).then(\n        () =&gt; {\n          //Designate that an iteration is no longer running:\n          inAnIter.text = 'false';\n\n          //Recurse:\n          gameLoop();\n        }\n      );\n    } else {\n      //Designate that an iteration is no longer running:\n      inAnIter.text = 'false';\n    }\n  }\n}\n\ngameLoop();\n\nfunction iterText(roundsPlayed, gameScore, goal) {\n  /**\n   * Changes the game text to display the rounds played, game score and the\n   * kicker's scoring result.\n   * @param{string} roundsPlayed -- A string containing an int that shows the\n   * iterations run.\n   * @param{string} gameScore -- A string containing an int that shows the\n   * current iteration's score.\n   * @param{int} goal -- An int equal to either 1 or -1. Value of 1 is for if a\n   * goal was scored during the iteration.\n   */\n  //Set Game Text Lines:\n  txt.data['text'] = [\n    `Rounds played: ${roundsPlayed}`,\n    `Total score: ${gameScore}`,\n    '',\n    (goal === 1) ? 'GOAL!' : 'Blocked'\n  ];\n  txt.change.emit(); //Finalize changes by emitting to source\n}\n\nfunction rollKickerAction() {\n  /**\n  * Selects a kicker pure strategy by converting the pure strategy selection\n  * chances array to a form where each value has the previous values added to\n  * them, so that the strategy can then be chosen by comparing the values to a\n  * random roll. The kicker foot and direction are then determined according to\n  * the strategy index before being returned in an array.\n  * @return{array} -- An array that contains strings representing the kicker\n  * foot, and their chosen kick direction. The kicker foot string can have value\n  * equal to 'Left' or 'Right', and the kick direction has to be equal to either\n  * 'Left', 'Middle', or 'Right'.\n  */\n  //Copy chances into array, then modify array to act as roll thresholds:\n  let arrVals = [0].concat(chances.slice());\n  arrVals.slice(1).forEach(\n    (v, i) =&gt; arrVals[i + 1] += arrVals[i]\n  );\n\n  //Determine actions to take based off roll comparison to thresholds:\n  let index = 5;\n  const roll = Math.random();\n  arrVals.slice(0, 6).forEach(\n    (v) =&gt; {\n      if(roll &lt; v) { index -= 1; }\n    }\n  );\n  return [\n    (index &lt; 3) ? 'Left' : 'Right',\n    directions[(index % 3)]\n  ];\n}\n\n//Handle Goalie Decision\nfunction fictitiousPlay(footIsLeft, footDict) {\n  /**\n  * Determines the keeper's action according to Fictitious Play.\n  * @param{bool} footIsLeft -- a bool containing whether or not the kicker is\n  * left-footed.\n  * @param{dict} footDict -- The dict that contains the score chances for the\n  * different possible kicker foot kicker action outcomes.\n  * @return{array} -- An array containing the direction for the keeper to dive,\n  * and the keeper's perceived risks for each possible action from left to\n  * right.\n  */\n  //Set decision making values to use according to kickerFoot:\n  const freqs = (footIsLeft) ? freq.slice(0, 3) : freq.slice(3, 6);\n\n  //Calculate goalie perceived risks:\n  const tsr = freqs.reduce(arrSumFunc);\n  const eFreqs = (tsr !== 0) ? freqs.map(x =&gt; x / tsr) : [1/3, 1/3, 1/3];\n  const risks = [0, 0, 0];\n  directions.forEach(\n    (v1, i) =&gt; directions.forEach(\n      (v2, j) =&gt; risks[i] += eFreqs[j] * footDict[v2 + v1]\n    )\n  );\n\n  //return goalie action and perceived risks:\n  const actionIndex = risks.indexOf(Math.min(...risks));\n  return [\n    directions[actionIndex],\n    ...risks\n  ];\n}\n\nfunction optimalMixed(kickerFoot) {\n  /**\n  * Determines the keeper's action according to the optimal mixed strategy for\n  * the keeper.\n  * param{string} kickerFoot -- Either 'Left' or 'Right' representing the\n  * kicker's footedness.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //selects and returns an action based off of optimal mixed strategy chances:\n  const thresholds = {\n    'Left'  : 0.8,\n    'Right' : 0.7419\n  };\n  const goKickerFoot = (Math.random() &gt;= thresholds[kickerFoot]);\n  return (goKickerFoot) ? kickerFoot : 'Middle';\n}\n\nfunction randomChoice() {\n  /**\n  * Determines the keeper's action at random.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //Selects and returns an action from directions at an equal chance:\n  const actionIndex = Math.round(Math.random()*3 - 0.5);\n  return directions[actionIndex];\n}\n\nfunction goalieCheats(kickerFoot) {\n  /**\n  * Determines the keeper's action according to a previously created strategy.\n  * param{string} kickerFoot -- Either 'Left' or 'Right' representing the\n  * kicker's footedness.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //return the action of the pure strategy corresponding to the kicker foot:\n\n  const actionIndex = counterSrc.data[kickerFoot].indexOf(1);\n  return directions[actionIndex];\n}\n\nfunction handleFigVisibility(stratIsFictPlay) {\n  nextButton.visible = false;\n  distTable.visible = false;\n  autoAdvButton.visible = false;\n  advSpdSlider.visible = false;\n  gameFigButton.visible = true;\n\n  statsFig1Button.visible = true;\n  statsFig1.visible = false;\n\n  statsFig2Button.visible = true;\n  statsFig2.visible = false;\n\n  statsFig3Button.visible = stratIsFictPlay;\n  statsFig3.visible = false;\n\n  statsFig4Button.visible = true;\n  statsFig4.visible = false;\n\n}\n\nfunction scoring(footDict, kickerKick, goalieAction, actionsIndexKFKK) {\n  /**\n  * Handles the scoring for the game.\n  * param{dict} footDict -- The dict containing the score chances according to\n  * the different possible kicker kick direction and keeper dive direction\n  * outcomes for the kicker's footedness.\n  * param{string} kickerKick -- Either 'Left', 'Middle', or 'Right' for the\n  * kicker's kick direction.\n  * param{string} goalieAction -- Either 'Left', 'Middle', or 'Right' for the\n  * keeper's dive direction.\n  * param{int} actionsIndexKFKK -- an int designating an index selected\n  * previously according to the kicker's footedness and kick directions.\n  */\n  //Set function values:\n  const scoreRoll = Math.random();\n  const scoreChance = footDict[kickerKick + goalieAction];\n  const roundsPlayed = parseInt(nround.text) + 1;\n  const roundScore = (scoreRoll &lt;= scoreChance) ? +1 : -1;\n\n  //Update columns:\n  const scoreChanceCol = distData['striker_score_chance'];\n  const scoreRollCol = distData['striker_score_roll'];\n  scoreChanceCol.fill(0);\n  scoreRollCol.fill(0);\n  scoreChanceCol[actionsIndexKFKK] = scoreChance;\n  scoreRollCol[actionsIndexKFKK] = scoreRoll.toPrecision(6);\n\n  //Update text:\n  nround.text = roundsPlayed.toString();\n  const currentGameScore = parseInt(score.text) + roundScore;\n  score.text = currentGameScore.toString();\n\n  return [roundScore, currentGameScore, roundsPlayed, scoreChance];\n}\n\nfunction _moveGoalie(xLoc) {\n  /**\n  * Moves the goalie to the specified x coordinate.\n  * param{int} xLoc -- The x coord to move to.\n  */\n  //Move both components of the goalie:\n  goalieBody.x = xLoc;\n  goalieHead.x = xLoc;\n}\n\nfunction animateIter(goalieAction, kickerKick, goal) {\n  /**\n  * Handles the animation for the iteration.\n  * @param{string} goalieAction -- Either 'Left', 'Middle', 'Right' signifying\n  * the keeper's dive direction.\n  * @param{string} kickerKick -- Either 'Left', 'Middle', 'Right' signifying the\n  * kicker's kick direction.\n  * @param{int} goal -- Either 1 or -1 for the iteration score change.\n  */\n  //Set positions and store ball roll for handling cases:\n  const goalieActionIsKickerKick = (goalieAction === kickerKick);\n  const goalNotScored = (goal === -1);\n  const gPos = {\n    'Left'   : [37, 43],\n    'Middle' : [47, 53],\n    'Right'  : [57, 63]\n  };\n  const outOfGoalPos = {\n    'Left'   : [30, 30],\n    'Middle' : [30, 70],\n    'Right'  : [70, 70]\n  };\n  const shotUnluckyMiss = (goalNotScored &amp;&amp; !goalieActionIsKickerKick);\n  const bPos = (shotUnluckyMiss) ? outOfGoalPos : gPos;\n  const bRoll = Math.round(Math.random());\n\n  ball.x = bPos[kickerKick][bRoll];\n  ball.y = 63;\n  if(goalieActionIsKickerKick){\n    const goalieRolledX = gPos[goalieAction][[1, 0][bRoll]];\n    const goalieX = (goalNotScored) ? ball.x : goalieRolledX;\n    _moveGoalie(goalieX);\n  } else {\n    const goalieX = gPos[goalieAction][Math.round(Math.random())];\n    _moveGoalie(goalieX);\n  }\n}\n\nfunction goalieDecisionTracking(\n  actionsIndexKFKK,\n  kfRAdjust,\n  directionsIndexGa,\n  stratIsFictPlay,\n  perceivedRiskL,\n  perceivedRiskM,\n  perceivedRiskR\n) {\n  /**\n  * Tracks game data and puts it into the dist table.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  * @param{int} kfRAdjust -- An int for adjusting indexes if the kicker is\n  * right-footed.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{bool} stratIsFictPlay -- A bool for whether or not the keeper is\n  * using fictitious play.\n  * @param{float} perceivedRiskL -- The keeper's perceived risks for diving left.\n  * @param{float} perceivedRiskM -- The keeper's perceived risks for diving middle.\n  * @param{float} perceivedRiskR -- The keeper's perceived risks for diving right.\n  */\n\n  //Increase corresponding trackers to KFKK and KFGA:\n  freq[actionsIndexKFKK] += 1;\n  const decisionsIndex = kfRAdjust + directionsIndexGa;\n  distData['decisions'][decisionsIndex] += 1;\n\n  //Update table perceived risks if fictitious play:\n  if(stratIsFictPlay) {\n    _updateDecisionTableRisks(\n      perceivedRiskL,\n      perceivedRiskM,\n      perceivedRiskR,\n      kfRAdjust\n    );\n  }\n\n  //Update table by finalizing changes to source:\n  distTableSrc.change.emit();\n}\n\nfunction _updateDecisionTableRisks(\n  perceivedRiskL,\n  perceivedRiskM,\n  perceivedRiskR,\n  kfRAdjust\n) {\n  /**\n  * updates the dist table's risk values.\n  * @param{float} perceivedRiskL -- The keeper's perceived risks for diving left.\n  * @param{float} perceivedRiskM -- The keeper's perceived risks for diving middle.\n  * @param{float} perceivedRiskR -- The keeper's perceived risks for diving right.\n  * @param{int} kfRAdjust -- An int for adjusting indexes if the kicker is\n  * right-footed.\n  */\n  //Reset column then set perceived risk for rows corresponding to kicker foot:\n  const risks = distData['goalie_perceived_risks'];\n\n  risks.fill(0);\n  const prs = [\n    perceivedRiskL.toPrecision(6),\n    perceivedRiskM.toPrecision(6),\n    perceivedRiskR.toPrecision(6)\n  ];\n  prs.forEach(\n    (v, i) =&gt; risks[kfRAdjust + i] = v\n  );\n}\n\nfunction _fig1Iter(\n  goal,\n  directionsIndexGa,\n  sections,\n  fig1Data,\n  actionsIndexKFKK\n) {\n  /**\n  * Handles the data for an iteration in Game Stats Figure 1.\n  * @param{int} goal -- Either -1 or 1 for the iterations score change.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{array} sections -- An array containing the column names for the bar\n  * sections in Figure 1.\n  * @param{dict} fig1Data -- The data for game stats figure 1.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  */\n  //Increase section value of iteration result by 1:\n  const sectionIndex = (goal === 1) ? 0 : directionsIndexGa + 1;\n  const section = sections[sectionIndex];\n  fig1Data[section][actionsIndexKFKK] += 1;\n}\n\nfunction _fig1Adjust(sections, fig1Data) {\n  /**\n  * Adjusts Game Stats Figure 1.\n  * @param{array} sections -- An array containing the column names for the bar\n  * sections in Figure 1.\n  * @param{dict} fig1Data -- The data for game stats figure 1.\n  */\n  //Get total heights of kfkk bars:\n  const heights = [0, 0, 0, 0, 0, 0]\n  sections.forEach(\n    (v1) =&gt; fig1Data[v1].forEach(\n      (v2, i) =&gt; heights[i] += v2\n    )\n  );\n\n  //Set y max to 1.1 * the height of the tallest kfkk bar (rounded):\n  statsFig1.y_range.end = Math.round(Math.max(...heights) * 1.1);\n}\n\nfunction updateFig1(\n  goal,\n  directionsIndexGa,\n  actionsIndexKFKK,\n  roundIsLastIter\n) {\n  /**\n  * Updates the data for Game Stats Figure 1.\n  * @param{int} goal -- Either -1 or 1 for the iterations score change.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  */\n  //create constants for referencing:\n  const fig1Data = statsFig1Src.data;\n  const sections = ['scored_y', 'blockedl_y', 'blockedm_y', 'blockedr_y'];\n\n  //Update the figure for the iteration:\n  _fig1Iter(goal, directionsIndexGa, sections, fig1Data, actionsIndexKFKK);\n\n  //Make final adjustments if it is the final iteration:\n  if(roundIsLastIter) { _fig1Adjust(sections, fig1Data); }\n\n  //Update the figure by finalizing the changes to the data source:\n  statsFig1Src.change.emit();\n}\n\nfunction _fig2Iter(fig2Data, roundsPlayed, gameScore, roundScoreChance) {\n  /**\n  * Handles an iteration of data for Game Stats Figure 2.\n  * @param{dict} fig2Data -- The data for Game Stats Figure 2.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{int} gameScore -- The score for the game at the current iteration.\n  * @param{float} roundScoreChance -- The chance of scoring for the played iteration.\n  */\n  //Plot Values:\n  fig2Data['ys'][roundsPlayed] = gameScore;\n  fig2Data['chance_ys'][roundsPlayed] = 2*roundScoreChance - 1;\n}\n\nfunction _fig2Adjust(fig2Data, itersToRun) {\n  /**\n  * Adjusts the data for Game Stats Figure 2.\n  * @param{dict} fig2Data -- The data for Game Stats Figure 2.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Adjust chanceYs:\n  const chanceYs = fig2Data['chance_ys'];\n  chanceYs.slice(1).forEach(\n    (v, i) =&gt; chanceYs[i + 1] += chanceYs[i]\n  );\n\n  //Get max and min of figure points:\n  const ys = fig2Data['ys'];\n  let minVal = Math.min(... ys);\n  let maxVal = Math.max(... ys, ...chanceYs);\n\n  //Adjust figure display:\n  const buffer = Math.round((Math.abs(maxVal) + Math.abs(minVal)) * 0.1);\n  maxVal += buffer;\n  minVal -= buffer;\n  statsFig2.y_range.end   = maxVal;\n  statsFig2.y_range.start = minVal;\n\n  //Resize hit boxes:\n  const hitboxHeight = 2 * Math.max(Math.abs(maxVal), Math.abs(minVal));\n  fig2Data['heights'].fill(hitboxHeight);\n}\n\nfunction updateFig2(\n  roundsPlayed,\n  gameScore,\n  roundScoreChance,\n  roundIsLastIter,\n  itersToRun\n) {\n  /**\n  * Updates the data for Game Stats Figure 2.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{int} gameScore -- The score for the game at the current iteration.\n  * @param{float} roundScoreChance -- The chance of scoring for the played iteration.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Store reference to fig 2 data:\n  const fig2Data = statsFig2Src.data;\n\n  //Update the figure for the iteration:\n  _fig2Iter(fig2Data, roundsPlayed, gameScore, roundScoreChance);\n\n  //Adjust the figure as needed if it is the last iteration:\n  if(roundIsLastIter) { _fig2Adjust(fig2Data, itersToRun); }\n\n  //Update the source to finalize the changes to the figure:\n  statsFig2Src.change.emit();\n}\n\nfunction _fig3Iter(ys, roundsPlayed) {\n  /** Handles the data for an iteration for Game Stats Figure 3.\n  * @param{array} ys -- An array containing the ys columns of figure 3.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  */\n  //For each foot:\n  ['Left', 'Right'].forEach(\n    (footVal, footIndex) =&gt; {\n\n      //Calculate emprical frequencies of aim directions for that footedness:\n      const footFreq = freq.slice((3 * footIndex), (3 * (footIndex + 1)));\n      const footTsr = footFreq.reduce(arrSumFunc);\n      const footChances = (\n        (footTsr !== 0) ? footFreq.map(x =&gt; x/footTsr) : [1/3, 1/3, 1/3]\n      );\n\n      //calculate and plot risk of goalie taking each position:\n      directions.forEach(\n        (v1, i1) =&gt; directions.forEach(\n          (v2, i2) =&gt; {\n            const sideRisk = footChances[i2] * scoreProbDicts[footVal][v2 + v1];\n            const ysIndex = 3*footIndex + i1;\n            ys[ysIndex][roundsPlayed] += sideRisk;\n          }\n        )\n      );\n\n    }\n  );\n}\n\nfunction _fig3Adjust(fig3Data, itersToRun, ys) {\n  /**\n  * Adjusts Game Stats Figure 3's data.\n  * @param{dict} fig3Data -- The data for Game Stats figure 3.\n  * @param{int} itersToRun -- The total number of iterations in the game.\n  * @param{array} ys -- An array containing the ys columns of figure 3.\n  */\n  //store fig3Data hb columns for iteration and reference:\n  const hbs = [\n    fig3Data['hb1'],\n    fig3Data['hb2'],\n    fig3Data['hb3'],\n    fig3Data['hb4'],\n    fig3Data['hb5'],\n    fig3Data['hb6']\n  ];\n\n  //Adjustment loop:\n  let vals = [];\n\n  //For every iteration:\n  for(let iter = 0; iter &lt;= itersToRun; iter++){\n    let hbHeights = new Array(6);\n    let risks = new Array(6);\n\n    //For every risk value, send to risks list for later use and push to vals:\n    ys.forEach(\n      (yVal, yIndex) =&gt; {\n        risks[yIndex] = yVal[iter];\n        vals.push(yVal[iter]);\n      }\n    );\n\n    risks.sort((a, b) =&gt; a - b); //Sort risks in ascending order to setup\n\n    //For every entry in risks:\n    risks.forEach(\n      (rVal, rIndex, a) =&gt; {\n        //Set upper edge of hitbox to be equal to halfway between hitbox point\n        //and next point (Set top hitbox edge to 1):\n        let val = (rIndex === 5) ? 1 : ((rVal + a[rIndex + 1]) / 2);\n\n        //subtract heights of all lower hitboxes to get hitbox height:\n        hbHeights.slice(0, rIndex).forEach(\n          (rVal) =&gt; val -= rVal\n        );\n\n        //Save value for use in next hitbox's calculation and plot on graph:\n        hbHeights[rIndex] = val;\n        hbs[rIndex][iter] = val;\n      }\n    );\n  }\n\n  //Adjust graph based off of stored values:\n  const minVal = Math.round(Math.min(...vals) * 100) / 100;\n  const maxVal = Math.round(Math.max(...vals) * 100) / 100;\n  const buffer = Math.round((maxVal - minVal) * 100) / 1000;\n  statsFig3.y_range.end   = Math.min(maxVal + buffer, 1);\n  statsFig3.y_range.start = Math.max(minVal - buffer, 0);\n}\n\nfunction updateFig3(roundsPlayed, roundIsLastIter, itersToRun) {\n  /**\n  * Updates the data for Game Stats Figure 3.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Store values for reference:\n  let fig3Data = statsFig3Src.data;\n  const ys = [\n    fig3Data['ll_ys'], fig3Data['lm_ys'], fig3Data['lr_ys'],\n    fig3Data['rl_ys'], fig3Data['rm_ys'], fig3Data['rr_ys']\n  ];\n\n  //Update plot points:\n  _fig3Iter(ys, roundsPlayed);\n\n  //Make final adjustments to graph on last iteration:\n  if(roundIsLastIter) { _fig3Adjust(fig3Data, itersToRun, ys); }\n\n  //Finalize changes:\n  statsFig3Src.change.emit();\n}\n\nfunction updateFig4(\n  roundsPlayed,\n  roundScoreChance,\n  kickerFoot,\n  kickerKick,\n  goalieAction\n) {\n  /**\n  * Updates the data for Game Stats Figure 4.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{float} roundScoreChance -- The chance of scoring for the most\n  * recent iteration.\n  * @param{string} kickerFoot -- Either 'Left' or 'Right' signifying the kicker's\n  * footedness.\n  * @param{string} kickerKick -- Either 'Left', 'Middle', 'Right' signifying the\n  * kicker's kick direction.\n  * @param{string} goalieAction -- Either 'Left', 'Middle', 'Right' signifying\n  * the keeper's dive direction.\n  */\n  const fig4Data = statsFig4Src.data;\n  const index = roundsPlayed - 1;\n  fig4Data['ys'][index] = roundScoreChance;\n  fig4Data['feet'][index] = kickerFoot;\n  fig4Data['directions'][index] = kickerKick;\n  fig4Data['actions'][index] = goalieAction;\n\n  statsFig4Src.change.emit();\n}\n"},"id":"1536","type":"CustomJS"},{"attributes":{},"id":"1622","type":"Selection"},{"attributes":{"args":{"fig1Button":{"id":"1494"},"fig2Button":{"id":"1495"},"fig3Button":{"id":"1496"},"fig4Button":{"id":"1497"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"statsFig1":{"id":"1063"},"statsFig2":{"id":"1162"},"statsFig3":{"id":"1206"},"statsFig4":{"id":"1336"}},"code":"gameFigButton.disabled = true;\ngameFig.visible = true;\nfig1Button.disabled = false;\nstatsFig1.visible = false;\nfig2Button.disabled = false;\nstatsFig2.visible = false;\nfig3Button.disabled = false;\nstatsFig3.visible = false;\nfig4Button.disabled = false;\nstatsFig4.visible = false;\n"},"id":"1531","type":"CustomJS"},{"attributes":{"args":{"aimTextInputs":[{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"}],"automationTableSrc":{"id":"1519"},"counterMadeDiv":{"id":"1486"},"goalieCounterSrc":{"id":"1529"},"makeCounterButton":{"id":"1492"}},"code":"\nconst chances = automationTableSrc.data['chances'];\n\n//Hides the automation table as it is un-needed:\naimTextInputs.forEach(\n  (v) =&gt; v.visible = false\n);\n\nconst rDict = {\n  'LeftLeft'   : 0.55, 'LeftMiddle'   : 0.65, 'LeftRight'   : 0.93,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.95, 'RightMiddle'  : 0.73, 'RightRight'  : 0.70\n};\nconst lDict = {\n  'LeftLeft'   : 0.67, 'LeftMiddle'   : 0.70, 'LeftRight'   : 0.96,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.87, 'RightMiddle'  : 0.65, 'RightRight'  : 0.61\n};\nconst scoreProbDicts = {\n  'Right' : rDict,\n  'Left'  : lDict\n};\n\nconst directions = ['Left', 'Middle', 'Right'];\n\n['Left', 'Right'].forEach(\n  (foot, footIndex) =&gt; {\n    const aimChances = chances.slice(3 * footIndex, 3 * (footIndex + 1));\n\n    const scoreChancesDict = scoreProbDicts[foot];\n    const risks = [0, 0, 0];\n\n    directions.forEach(\n      (v, i) =&gt; {\n        directions.forEach(\n          (v2, i2) =&gt; risks[i] += (aimChances[i2] * scoreChancesDict[v2 + v])\n        )\n      }\n    );\n\n    const stratToTake = risks.indexOf(Math.min(...risks));\n    goalieCounterSrc.data[foot][stratToTake] = 1;\n  }\n);\n\ngoalieCounterSrc.change.emit();\n\nmakeCounterButton.visible = false;\n\ncounterMadeDiv.text = '1';\n"},"id":"1530","type":"CustomJS"},{"attributes":{"children":[{"id":"1489"},{"id":"1499"},{"id":"1507"},{"id":"1481"},{"id":"1490"},{"id":"1491"},{"id":"1492"},{"id":"1498"},{"id":"1500"},{"id":"1482"},{"id":"1483"},{"id":"1484"},{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"},{"id":"1493"},{"id":"1494"},{"id":"1495"},{"id":"1496"},{"id":"1497"}],"max_width":350,"min_width":350,"sizing_mode":"stretch_width"},"id":"1541","type":"Column"},{"attributes":{"args":{"autoNextButton":{"id":"1491"},"startAutomateButton":{"id":"1490"}},"code":"\nconst val = (this.text !== 'false');\nautoNextButton.disabled = val;\nstartAutomateButton.disabled = val;\n"},"id":"1528","type":"CustomJS"},{"attributes":{"source":{"id":"1023"}},"id":"1027","type":"CDSView"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1533"}]},"label":"Figure 2","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1495","type":"Button"},{"attributes":{"background_fill_color":"white","below":[{"id":"1074"},{"id":"1103"},{"id":"1106"}],"center":[{"id":"1077"},{"id":"1081"}],"height":360,"left":[{"id":"1078"}],"outline_line_color":null,"renderers":[{"id":"1086"},{"id":"1091"},{"id":"1096"},{"id":"1101"},{"id":"1121"},{"id":"1126"},{"id":"1131"},{"id":"1136"},{"id":"1141"},{"id":"1146"},{"id":"1151"},{"id":"1156"}],"sizing_mode":"stretch_both","title":{"id":"1064"},"toolbar":{"id":"1082"},"toolbar_location":null,"toolbar_sticky":false,"visible":false,"x_range":{"id":"1066"},"x_scale":{"id":"1070"},"y_range":{"id":"1068"},"y_scale":{"id":"1072"}},"id":"1063","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1582","type":"StringEditor"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1537"}]},"label":"Next","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1491","type":"Button"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#C8C8AF"},"line_alpha":{"value":0.1},"line_color":{"value":"#AFAF96"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"lm_ys"}},"id":"1253","type":"Scatter"},{"attributes":{"background_fill_alpha":0,"border_line_alpha":0,"items":[{"id":"1104"},{"id":"1105"}],"label_height":10,"label_text_font_size":"10pt","location":[146,20],"orientation":"horizontal","padding":0},"id":"1103","type":"Legend"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#8AD3AA"},"line_alpha":{"value":0.1},"line_color":{"value":"#8AD3AA"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1095","type":"Circle"},{"attributes":{"v_func":"\nconst newXs = xs.map(\n  (v) =&gt; ((v === 1) ? 1 : 0.8)\n)\nreturn newXs;\n"},"id":"1111","type":"CustomJSTransform"},{"attributes":{},"id":"1604","type":"Selection"},{"attributes":{"args":{"src":{"id":"1109"}},"v_func":"\nconst newXs = new Array(xs.length);\nxs.forEach(\n  (v, i) =&gt; newXs[i] = v/2 + src.data[\"scored_y\"][i]\n);\nreturn newXs;\n"},"id":"1112","type":"CustomJSTransform"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#3F6750"},"height":{"field":"scored_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#3F6750"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"scored_y","transform":{"id":"1110"}}},"id":"1120","type":"Rect"},{"attributes":{"fill_color":{"value":"#3F6750"},"height":{"field":"scored_y"},"line_color":{"value":"#3F6750"},"width":{"field":"hovered_widths","transform":{"id":"1111"}},"x":{"field":"x"},"y":{"field":"scored_y","transform":{"id":"1110"}}},"id":"1124","type":"Rect"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1139"},"hover_glyph":null,"muted_glyph":null,"name":"Blocked Middle","nonselection_glyph":{"id":"1140"},"view":{"id":"1142"}},"id":"1141","type":"GlyphRenderer"},{"attributes":{"v_func":"\nconst newXs = xs.map(\n  (v) =&gt; ((v === 2) ? 1 : 0.8)\n)\nreturn newXs;\n"},"id":"1113","type":"CustomJSTransform"},{"attributes":{"args":{"src":{"id":"1109"}},"v_func":"\nconst newXs = new Array(xs.length);\nxs.forEach(\n  (v, i) =&gt; newXs[i] = v/2 + src.data[\"blockedl_y\"][i] + src.data[\"scored_y\"][i]\n);\nreturn newXs;\n"},"id":"1114","type":"CustomJSTransform"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1124"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1125"},"view":{"id":"1127"}},"id":"1126","type":"GlyphRenderer"},{"attributes":{},"id":"1605","type":"UnionRenderers"},{"attributes":{"v_func":"\nconst newXs = xs.map(\n  (v) =&gt; ((v === 3) ? 1 : 0.8)\n)\nreturn newXs;\n"},"id":"1115","type":"CustomJSTransform"},{"attributes":{"args":{"src":{"id":"1109"}},"v_func":"\nconst newXs = new Array(xs.length);\nxs.forEach(\n  (v, i) =&gt; newXs[i] = v/2 + src.data[\"blockedm_y\"][i] + src.data[\"blockedl_y\"][i] + src.data[\"scored_y\"][i]\n);\nreturn newXs;\n"},"id":"1116","type":"CustomJSTransform"},{"attributes":{"v_func":"\nconst newXs = xs.map(\n  (v) =&gt; ((v === 4) ? 1 : 0.8)\n)\nreturn newXs;\n"},"id":"1117","type":"CustomJSTransform"},{"attributes":{"code":"\nconst kfkks = ['(L, L)', '(L, M)', '(L, R)', '(R, L)', '(R, M)', '(R, R)'];\nreturn kfkks[special_vars.index];\n"},"id":"1158","type":"CustomJSHover"},{"attributes":{},"id":"1606","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#8AD3AA"},"height":{"field":"blockedm_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#8AD3AA"},"width":{"field":"hovered_widths","transform":{"id":"1115"}},"x":{"field":"x"},"y":{"field":"blockedm_y","transform":{"id":"1114"}}},"id":"1145","type":"Rect"},{"attributes":{"source":{"id":"1109"}},"id":"1122","type":"CDSView"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1229"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1229"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ll_ys"}},"id":"1302","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#3F6750"},"height":{"field":"scored_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#3F6750"},"width":{"field":"hovered_widths","transform":{"id":"1111"}},"x":{"field":"x"},"y":{"field":"scored_y","transform":{"id":"1110"}}},"id":"1125","type":"Rect"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1119"},"hover_glyph":null,"muted_glyph":null,"name":"Scored","nonselection_glyph":{"id":"1120"},"view":{"id":"1122"}},"id":"1121","type":"GlyphRenderer"},{"attributes":{},"id":"1625","type":"UnionRenderers"},{"attributes":{"fill_color":{"value":"#8AD3AA"},"height":{"field":"blockedm_y"},"line_color":{"value":"#8AD3AA"},"width":{"field":"hovered_widths","transform":{"id":"1115"}},"x":{"field":"x"},"y":{"field":"blockedm_y","transform":{"id":"1114"}}},"id":"1144","type":"Rect"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.72}},"id":"1405","type":"Line"},{"attributes":{"source":{"id":"1356"}},"id":"1407","type":"CDSView"},{"attributes":{},"id":"1607","type":"UnionRenderers"},{"attributes":{"source":{"id":"1109"}},"id":"1127","type":"CDSView"},{"attributes":{"source":{"id":"1109"}},"id":"1142","type":"CDSView"},{"attributes":{},"id":"1626","type":"Selection"},{"attributes":{"source":{"id":"1109"}},"id":"1147","type":"CDSView"},{"attributes":{"source":{"id":"1228"}},"id":"1300","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ll_ys"}},"id":"1303","type":"Scatter"},{"attributes":{},"id":"1608","type":"Selection"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#8AD3AA"},"height":{"field":"blockedm_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#8AD3AA"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedm_y","transform":{"id":"1114"}}},"id":"1140","type":"Rect"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1434"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1435"},"view":{"id":"1437"}},"id":"1436","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1144"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1145"},"view":{"id":"1147"}},"id":"1146","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#CBEBD9"},"height":{"field":"blockedr_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#CBEBD9"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedr_y","transform":{"id":"1116"}}},"id":"1150","type":"Rect"},{"attributes":{"source":{"id":"1109"}},"id":"1152","type":"CDSView"},{"attributes":{},"id":"1574","type":"BasicTickFormatter"},{"attributes":{"fill_color":{"value":"#CBEBD9"},"height":{"field":"blockedr_y"},"line_color":{"value":"#CBEBD9"},"width":{"field":"hovered_widths","transform":{"id":"1117"}},"x":{"field":"x"},"y":{"field":"blockedr_y","transform":{"id":"1116"}}},"id":"1154","type":"Rect"},{"attributes":{},"id":"1575","type":"AllLabels"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#CBEBD9"},"height":{"field":"blockedr_y"},"line_alpha":{"value":0},"line_color":{"value":"#CBEBD9"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedr_y","transform":{"id":"1116"}}},"id":"1149","type":"Rect"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1409"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1410"},"view":{"id":"1412"}},"id":"1411","type":"GlyphRenderer"},{"attributes":{},"id":"1609","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1154"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1155"},"view":{"id":"1157"}},"id":"1156","type":"GlyphRenderer"},{"attributes":{"text":"Score Over Iterations Run","text_font_size":"16pt"},"id":"1163","type":"Title"},{"attributes":{},"id":"1577","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1149"},"hover_glyph":null,"muted_glyph":null,"name":"Blocked Right","nonselection_glyph":{"id":"1150"},"view":{"id":"1152"}},"id":"1151","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"lm_ys"}},"id":"1308","type":"Scatter"},{"attributes":{"data_source":{"id":"1472"},"glyph":{"id":"1473"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1475"}},"id":"1474","type":"GlyphRenderer"},{"attributes":{},"id":"1610","type":"Selection"},{"attributes":{"source":{"id":"1109"}},"id":"1157","type":"CDSView"},{"attributes":{},"id":"1578","type":"Selection"},{"attributes":{"end":50,"start":-50},"id":"1167","type":"Range1d"},{"attributes":{"callback":null,"formatters":{"@blockedl_y":{"id":"1159"},"@x":{"id":"1158"}},"point_policy":"follow_mouse","renderers":[{"id":"1121"},{"id":"1131"},{"id":"1141"},{"id":"1151"}],"tooltips":"\n&lt;div&gt;\n  &lt;font size=\"1pt\"&gt;&lt;p&gt;Kicker (Foot, Kick): @x{custom}&lt;br&gt;\nHovered Bar: $name&lt;br&gt;\nBar Height: @blockedl_y{custom}&lt;/p&gt;&lt;/font&gt;\n&lt;/div&gt;\n"},"id":"1160","type":"HoverTool"},{"attributes":{"args":{"src":{"id":"1109"}},"code":"\nconst barTypes = ['Scored', 'Blocked Left', 'Blocked Middle', 'Blocked Right'];\nconst columns = ['scored_y', 'blockedl_y', 'blockedm_y', 'blockedr_y'];\nconst wCodes = [1, 2, 3, 4];\nconst data = src.data;\nconst index = special_vars.index;\nconst selected = barTypes.indexOf(special_vars.name);\n\ndata['hovered_widths'].fill(0);\ndata['hovered_widths'][index] = wCodes[selected];\nsrc.change.emit();\n\nconst val = data[columns[selected]][index];\nreturn val.toString();\n"},"id":"1159","type":"CustomJSHover"},{"attributes":{"end":50.5,"start":-0.5},"id":"1165","type":"Range1d"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1231"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1231"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"lm_ys"}},"id":"1307","type":"Scatter"},{"attributes":{},"id":"1611","type":"UnionRenderers"},{"attributes":{},"id":"1171","type":"LinearScale"},{"attributes":{},"id":"1579","type":"StringFormatter"},{"attributes":{"formatter":{"id":"1559"},"major_label_policy":{"id":"1560"},"ticker":{"id":"1178"}},"id":"1177","type":"LinearAxis"},{"attributes":{},"id":"1580","type":"StringEditor"},{"attributes":{},"id":"1169","type":"LinearScale"},{"attributes":{},"id":"1612","type":"Selection"},{"attributes":{"axis":{"id":"1217"},"grid_line_color":"black","ticker":null,"visible":false},"id":"1220","type":"Grid"},{"attributes":{"formatter":{"id":"1562"},"major_label_policy":{"id":"1563"},"ticker":{"id":"1174"}},"id":"1173","type":"LinearAxis"},{"attributes":{},"id":"1174","type":"BasicTicker"},{"attributes":{"axis":{"id":"1173"},"grid_line_color":"black","ticker":null,"visible":false},"id":"1176","type":"Grid"},{"attributes":{},"id":"1583","type":"StringFormatter"},{"attributes":{},"id":"1584","type":"StringEditor"},{"attributes":{"axis":{"id":"1177"},"dimension":1,"grid_line_color":"black","ticker":null,"visible":false},"id":"1180","type":"Grid"},{"attributes":{},"id":"1178","type":"BasicTicker"},{"attributes":{},"id":"1585","type":"StringFormatter"},{"attributes":{"active_multi":null,"tools":[{"id":"1204"}]},"id":"1181","type":"Toolbar"},{"attributes":{},"id":"1586","type":"StringEditor"},{"attributes":{},"id":"1222","type":"BasicTicker"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#CE7D7D"},"line_alpha":{"value":0.1},"line_color":{"value":"#B56464"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1185","type":"Scatter"},{"attributes":{},"id":"1587","type":"StringFormatter"},{"attributes":{},"id":"1588","type":"StringEditor"},{"attributes":{"axis":{"id":"1221"},"dimension":1,"grid_line_color":"black","ticker":null,"visible":false},"id":"1224","type":"Grid"},{"attributes":{"active_multi":null,"tools":[{"id":"1334"}]},"id":"1225","type":"Toolbar"},{"attributes":{"text":"0"},"id":"1226","type":"Div"},{"attributes":{"args":{"highlightIndex":{"id":"1226"},"selectedIndex":{"id":"1227"},"src":{"id":"1228"}},"code":"\nconst index = special_vars.index;\nconst name = special_vars.name;\nconst data = src.data;\n\n\nfunction selectSortedValIndex() {\n  const values = [\n    data['ll_ys'][index], data['lm_ys'][index], data['lr_ys'][index],\n    data['rl_ys'][index], data['rm_ys'][index], data['rr_ys'][index]\n  ];\n\n  const sortedValues = values.slice();\n  sortedValues.sort((a, b) =&gt; b - a);\n\n  selectedIndex.text = values.indexOf(sortedValues[parseInt(name)]).toString();\n}\n\nconst column = [1, 2, 3, 4, 5, 6];\n\nselectSortedValIndex();\n\nconst selected = column[parseInt(selectedIndex.text)];\n\ndata['highlight_alphas'][parseInt(highlightIndex.text)] = 0;\nhighlightIndex.text = index.toString();\ndata['highlight_alphas'][index] = selected;\n\nsrc.change.emit();\n\nreturn index.toString();\n"},"id":"1331","type":"CustomJSHover"},{"attributes":{},"id":"1589","type":"StringFormatter"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.72}},"id":"1404","type":"Line"},{"attributes":{},"id":"1590","type":"StringEditor"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1302"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1303"},"view":{"id":"1305"}},"id":"1304","type":"GlyphRenderer"},{"attributes":{"formatter":{"id":"1565"},"major_label_policy":{"id":"1566"},"ticker":{"id":"1222"}},"id":"1221","type":"LinearAxis"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1307"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1308"},"view":{"id":"1310"}},"id":"1309","type":"GlyphRenderer"},{"attributes":{},"id":"1591","type":"StringFormatter"},{"attributes":{"fill_color":{"value":"#CE7D7D"},"line_color":{"value":"#B56464"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1184","type":"Scatter"},{"attributes":{},"id":"1592","type":"StringEditor"},{"attributes":{"source":{"id":"1228"}},"id":"1305","type":"CDSView"},{"attributes":{"args":{"fig1Button":{"id":"1494"},"fig2Button":{"id":"1495"},"fig3Button":{"id":"1496"},"fig4Button":{"id":"1497"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"statsFig1":{"id":"1063"},"statsFig2":{"id":"1162"},"statsFig3":{"id":"1206"},"statsFig4":{"id":"1336"}},"code":"gameFigButton.disabled = false;\ngameFig.visible = false;\nfig1Button.disabled = true;\nstatsFig1.visible = true;\nfig2Button.disabled = false;\nstatsFig2.visible = false;\nfig3Button.disabled = false;\nstatsFig3.visible = false;\nfig4Button.disabled = false;\nstatsFig4.visible = false;\n"},"id":"1532","type":"CustomJS"},{"attributes":{"args":{"fig1Button":{"id":"1494"},"fig2Button":{"id":"1495"},"fig3Button":{"id":"1496"},"fig4Button":{"id":"1497"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"statsFig1":{"id":"1063"},"statsFig2":{"id":"1162"},"statsFig3":{"id":"1206"},"statsFig4":{"id":"1336"}},"code":"gameFigButton.disabled = false;\ngameFig.visible = false;\nfig1Button.disabled = false;\nstatsFig1.visible = false;\nfig2Button.disabled = true;\nstatsFig2.visible = true;\nfig3Button.disabled = false;\nstatsFig3.visible = false;\nfig4Button.disabled = false;\nstatsFig4.visible = false;\n"},"id":"1533","type":"CustomJS"},{"attributes":{"args":{"fig1Button":{"id":"1494"},"fig2Button":{"id":"1495"},"fig3Button":{"id":"1496"},"fig4Button":{"id":"1497"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"statsFig1":{"id":"1063"},"statsFig2":{"id":"1162"},"statsFig3":{"id":"1206"},"statsFig4":{"id":"1336"}},"code":"gameFigButton.disabled = false;\ngameFig.visible = false;\nfig1Button.disabled = false;\nstatsFig1.visible = false;\nfig2Button.disabled = false;\nstatsFig2.visible = false;\nfig3Button.disabled = true;\nstatsFig3.visible = true;\nfig4Button.disabled = false;\nstatsFig4.visible = false;\n"},"id":"1534","type":"CustomJS"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1526"}]},"label":"Automate","sizing_mode":"scale_width","width_policy":"fit"},"id":"1489","type":"Button"},{"attributes":{"background_fill_color":"green","below":[{"id":"1014"}],"center":[{"id":"1017"},{"id":"1021"}],"height":400,"left":[{"id":"1018"}],"outline_line_color":"black","renderers":[{"id":"1026"},{"id":"1031"},{"id":"1036"},{"id":"1041"},{"id":"1049"},{"id":"1052"},{"id":"1055"},{"id":"1058"},{"id":"1061"},{"id":"1474"}],"sizing_mode":"stretch_width","title":{"id":"1004"},"toolbar":{"id":"1022"},"toolbar_location":null,"toolbar_sticky":false,"x_range":{"id":"1006"},"x_scale":{"id":"1010"},"y_range":{"id":"1008"},"y_scale":{"id":"1012"}},"id":"1003","subtype":"Figure","type":"Plot"},{"attributes":{"args":{"fig1Button":{"id":"1494"},"fig2Button":{"id":"1495"},"fig3Button":{"id":"1496"},"fig4Button":{"id":"1497"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"statsFig1":{"id":"1063"},"statsFig2":{"id":"1162"},"statsFig3":{"id":"1206"},"statsFig4":{"id":"1336"}},"code":"gameFigButton.disabled = false;\ngameFig.visible = false;\nfig1Button.disabled = false;\nstatsFig1.visible = false;\nfig2Button.disabled = false;\nstatsFig2.visible = false;\nfig3Button.disabled = false;\nstatsFig3.visible = false;\nfig4Button.disabled = true;\nstatsFig4.visible = true;\n"},"id":"1535","type":"CustomJS"},{"attributes":{"data_source":{"id":"1033"},"glyph":{"id":"1034"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1035"},"view":{"id":"1037"}},"id":"1036","type":"GlyphRenderer"},{"attributes":{},"id":"1015","type":"BasicTicker"},{"attributes":{"source":{"id":"1028"}},"id":"1032","type":"CDSView"},{"attributes":{"text":"FIFA 2020 Penalty Simulator","text_font_size":"15pt"},"id":"1004","type":"Title"},{"attributes":{},"id":"1593","type":"UnionRenderers"},{"attributes":{"formatter":{"id":"1547"},"major_label_policy":{"id":"1548"},"ticker":{"id":"1019"},"visible":false},"id":"1018","type":"LinearAxis"},{"attributes":{"args":{"aimTextInputs":[{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"}],"chancesGT1Tip":{"id":"1483"},"chancesLT0Tip":{"id":"1482"},"chancesNE1Tip":{"id":"1484"},"chancesValidDiv":{"id":"1487"},"startAutomateButton":{"id":"1490"},"tableSrc":{"id":"1519"}},"code":"\n//Hide start button:\nstartAutomateButton.visible = false;\n\nconst aimVals = aimTextInputs.map(\n  (v) =&gt; parseFloat(v.value)\n);\n\n//Handle Validity Checks 1 &amp; 2:\nconst isValid1 = (Math.max(...aimVals) &lt;= 1);\nconst isValid2 = (Math.min(...aimVals) &gt;= 0);\n\n//Handle Validity check 3:\nconst total = aimVals.reduce((a, b) =&gt; a + b);\nconst isValid3 = (Math.abs(total - 1) &lt;= 0.0000001);\n\nchancesGT1Tip.visible = !isValid1;\nchancesLT0Tip.visible = !isValid2;\nchancesNE1Tip.visible = !isValid3;\n\ntableSrc.data['chances'] = aimVals.slice();\ntableSrc.change.emit();\n\nchancesValidDiv.text = ((isValid1 &amp;&amp; isValid2 &amp;&amp; isValid3) ? '1' : '0');\n"},"id":"1538","type":"CustomJS"},{"attributes":{"children":[{"id":"1003"},{"id":"1063"},{"id":"1162"},{"id":"1206"},{"id":"1336"},{"id":"1516"}],"max_width":600,"min_width":600,"sizing_mode":"stretch_width"},"id":"1540","type":"Column"},{"attributes":{},"id":"1012","type":"LinearScale"},{"attributes":{},"id":"1072","type":"LinearScale"},{"attributes":{},"id":"1594","type":"Selection"},{"attributes":{"axis":{"id":"1014"},"grid_line_color":"black","ticker":null,"visible":false},"id":"1017","type":"Grid"},{"attributes":{"end":100},"id":"1006","type":"Range1d"},{"attributes":{},"id":"1010","type":"LinearScale"},{"attributes":{"end":1000,"sizing_mode":"stretch_width","start":50,"step":10,"title":"Auto Advance Delay (ms)","value":300,"visible":false},"id":"1500","type":"Slider"},{"attributes":{"formatter":{"id":"1550"},"major_label_policy":{"id":"1551"},"ticker":{"id":"1015"},"visible":false},"id":"1014","type":"LinearAxis"},{"attributes":{"args":{"aimTextInputs":[{"id":"1501"},{"id":"1502"},{"id":"1503"},{"id":"1504"},{"id":"1505"},{"id":"1506"}],"counterMadeDiv":{"id":"1486"},"cpuSelectedDiv":{"id":"1485"},"selectCpuTip":{"id":"1481"},"stratDropdown":{"id":"1507"},"stratToUseDiv":{"id":"1480"}},"code":"\n//Set the label of the dropdown (the text displayed) to the selected item:\nstratDropdown.label = this.item;\n\n//Set the text of the strategy_to_use div to the selected item:\nstratToUseDiv.text = this.item;\n\n//Sets the aim sliders to be visible:\naimTextInputs.forEach(\n  (v) =&gt; v.visible = true\n)\n\n//Sets cpuSelectedDiv to indicate that a cpu strat has been selected:\ncpuSelectedDiv.text = '1';\n\n//update the tracking div for needing a goalie cheats counter:\ncounterMadeDiv.text = ((this.item === 'Goalie_Cheats') ? '0' : '1');\n\n//Hides the select a cpu strategy tip:\nselectCpuTip.visible = false;\n"},"id":"1539","type":"CustomJS"},{"attributes":{"axis":{"id":"1018"},"dimension":1,"grid_line_color":"black","ticker":null,"visible":false},"id":"1021","type":"Grid"},{"attributes":{},"id":"1019","type":"BasicTicker"},{"attributes":{"active_multi":null},"id":"1022","type":"Toolbar"},{"attributes":{},"id":"1595","type":"UnionRenderers"},{"attributes":{"data":{},"selected":{"id":"1602"},"selection_policy":{"id":"1601"}},"id":"1048","type":"ColumnDataSource"},{"attributes":{"end":50},"id":"1068","type":"Range1d"},{"attributes":{},"id":"1596","type":"Selection"},{"attributes":{"toolbar":{"id":"1737"},"toolbar_location":"above"},"id":"1738","type":"ToolbarBox"},{"attributes":{"data":{"x":[24,76,78,22,24],"y":[63,63,47,47,63]},"selected":{"id":"1594"},"selection_policy":{"id":"1593"}},"id":"1023","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#CBEBD9"},"height":{"field":"blockedr_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#CBEBD9"},"width":{"field":"hovered_widths","transform":{"id":"1117"}},"x":{"field":"x"},"y":{"field":"blockedr_y","transform":{"id":"1116"}}},"id":"1155","type":"Rect"},{"attributes":{},"id":"1070","type":"LinearScale"},{"attributes":{"data":{"Left":[0,0,0],"Right":[0,0,0]},"selected":{"id":"1642"},"selection_policy":{"id":"1641"}},"id":"1529","type":"ColumnDataSource"},{"attributes":{"background_fill_color":"white","below":[{"id":"1173"}],"center":[{"id":"1176"},{"id":"1180"}],"height":360,"left":[{"id":"1177"}],"outline_line_color":"black","renderers":[{"id":"1186"},{"id":"1191"},{"id":"1196"},{"id":"1201"}],"sizing_mode":"stretch_both","title":{"id":"1163"},"toolbar":{"id":"1181"},"toolbar_location":null,"toolbar_sticky":false,"visible":false,"x_range":{"id":"1165"},"x_scale":{"id":"1169"},"y_range":{"id":"1167"},"y_scale":{"id":"1171"}},"id":"1162","subtype":"Figure","type":"Plot"},{"attributes":{"formatter":{"id":"1556"},"major_label_policy":{"id":"1557"},"ticker":{"id":"1075"},"visible":false},"id":"1074","type":"LinearAxis"},{"attributes":{},"id":"1075","type":"BasicTicker"},{"attributes":{"end":90},"id":"1008","type":"Range1d"},{"attributes":{"text":"Shot Status Statistics","text_font_size":"16pt"},"id":"1064","type":"Title"},{"attributes":{"axis":{"id":"1074"},"grid_line_color":"black","ticker":null,"visible":false},"id":"1077","type":"Grid"},{"attributes":{},"id":"1597","type":"UnionRenderers"},{"attributes":{"end":6},"id":"1066","type":"Range1d"},{"attributes":{},"id":"1598","type":"Selection"},{"attributes":{"data_source":{"id":"1023"},"glyph":{"id":"1024"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1025"},"view":{"id":"1027"}},"id":"1026","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1228"}},"id":"1275","type":"CDSView"},{"attributes":{"line_color":"lightgreen","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1024","type":"Line"},{"attributes":{"children":[[{"id":"1540"},0,0],[{"id":"1541"},0,1]]},"id":"1736","type":"GridBox"},{"attributes":{"data_source":{"id":"1028"},"glyph":{"id":"1029"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1030"},"view":{"id":"1032"}},"id":"1031","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"lightgreen","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1025","type":"Line"},{"attributes":{"line_color":"lightgreen","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1029","type":"Line"},{"attributes":{"toolbars":[{"id":"1082"},{"id":"1022"},{"id":"1181"},{"id":"1225"},{"id":"1355"},{"id":"1082"},{"id":"1022"},{"id":"1181"},{"id":"1225"},{"id":"1355"}],"tools":[{"id":"1160"},{"id":"1204"},{"id":"1334"},{"id":"1470"},{"id":"1160"},{"id":"1204"},{"id":"1334"},{"id":"1470"}]},"id":"1737","type":"ProxyToolbar"},{"attributes":{},"id":"1599","type":"UnionRenderers"},{"attributes":{"data":{"chance_ys":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"heights":[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],"highlight_alphas":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"xs":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"ys":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"selected":{"id":"1624"},"selection_policy":{"id":"1623"}},"id":"1182","type":"ColumnDataSource"},{"attributes":{},"id":"1615","type":"UnionRenderers"},{"attributes":{},"id":"1600","type":"Selection"},{"attributes":{"source":{"id":"1038"}},"id":"1042","type":"CDSView"},{"attributes":{"fill_color":{"value":"red"},"height":{"value":4},"line_width":{"value":2},"width":{"value":3},"x":{"value":50},"y":{"value":65}},"id":"1044","type":"Rect"},{"attributes":{"data":{"x":[3,12,88,97,3],"y":[15,63,63,15,15]},"selected":{"id":"1596"},"selection_policy":{"id":"1595"}},"id":"1028","type":"ColumnDataSource"},{"attributes":{"cx":{"value":50},"cy":{"value":2},"line_alpha":{"value":0.1},"line_color":{"value":"lightgreen"},"line_width":{"value":4},"x0":{"value":33},"x1":{"value":67},"y0":{"value":15},"y1":{"value":15}},"id":"1040","type":"Quadratic"},{"attributes":{"source":{"id":"1033"}},"id":"1037","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"lightgreen","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1030","type":"Line"},{"attributes":{"fill_color":{"value":"lightblue"},"height":{"value":6},"line_width":{"value":2},"width":{"value":4},"x":{"value":50},"y":{"value":11}},"id":"1047","type":"Rect"},{"attributes":{},"id":"1601","type":"UnionRenderers"},{"attributes":{"line_color":"whitesmoke","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1034","type":"Line"},{"attributes":{"data":{"x":[34,34,66,66],"y":[63,82,82,63]},"selected":{"id":"1598"},"selection_policy":{"id":"1597"}},"id":"1033","type":"ColumnDataSource"},{"attributes":{"line_alpha":0.1,"line_color":"whitesmoke","line_width":4,"x":{"field":"x"},"y":{"field":"y"}},"id":"1035","type":"Line"},{"attributes":{"fill_color":{"value":"lightblue"},"line_width":{"value":2},"size":{"value":21},"x":{"value":50},"y":{"value":16}},"id":"1046","type":"Circle"},{"attributes":{"data":{},"selected":{"id":"1600"},"selection_policy":{"id":"1599"}},"id":"1038","type":"ColumnDataSource"},{"attributes":{},"id":"1602","type":"Selection"},{"attributes":{"cx":{"value":50},"cy":{"value":2},"line_color":{"value":"lightgreen"},"line_width":{"value":4},"x0":{"value":33},"x1":{"value":67},"y0":{"value":15},"y1":{"value":15}},"id":"1039","type":"Quadratic"},{"attributes":{"data":{},"selected":{"id":"1604"},"selection_policy":{"id":"1603"}},"id":"1051","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"1038"},"glyph":{"id":"1039"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1040"},"view":{"id":"1042"}},"id":"1041","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1051"},"glyph":{"id":"1044"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1053"}},"id":"1052","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"whitesmoke"},"line_width":{"value":2},"size":{"value":17},"x":{"value":50},"y":{"value":13}},"id":"1045","type":"Circle"},{"attributes":{"fill_color":{"value":"red"},"line_width":{"value":2},"size":{"value":17},"x":{"value":50},"y":{"value":69}},"id":"1043","type":"Circle"},{"attributes":{"source":{"id":"1048"}},"id":"1050","type":"CDSView"},{"attributes":{},"id":"1603","type":"UnionRenderers"},{"attributes":{"data_source":{"id":"1048"},"glyph":{"id":"1043"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1050"}},"id":"1049","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1182"},"glyph":{"id":"1184"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1185"},"view":{"id":"1187"}},"id":"1186","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1051"}},"id":"1053","type":"CDSView"},{"attributes":{"source":{"id":"1060"}},"id":"1062","type":"CDSView"},{"attributes":{"source":{"id":"1182"}},"id":"1187","type":"CDSView"},{"attributes":{"data_source":{"id":"1054"},"glyph":{"id":"1045"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1056"}},"id":"1055","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1054"}},"id":"1056","type":"CDSView"},{"attributes":{"fill_color":{"value":"black"},"marker":{"value":"circle_dot"},"size":{"value":3},"x":{"field":"xs"},"y":{"field":"chance_ys"}},"id":"1189","type":"Scatter"},{"attributes":{"data":{},"selected":{"id":"1606"},"selection_policy":{"id":"1605"}},"id":"1054","type":"ColumnDataSource"},{"attributes":{"source":{"id":"1182"}},"id":"1202","type":"CDSView"},{"attributes":{"data":{},"selected":{"id":"1608"},"selection_policy":{"id":"1607"}},"id":"1057","type":"ColumnDataSource"},{"attributes":{"background_fill_color":"white","below":[{"id":"1217"}],"center":[{"id":"1220"},{"id":"1224"}],"height":360,"left":[{"id":"1221"}],"outline_line_color":"black","renderers":[{"id":"1244"},{"id":"1249"},{"id":"1254"},{"id":"1259"},{"id":"1264"},{"id":"1269"},{"id":"1274"},{"id":"1279"},{"id":"1284"},{"id":"1289"},{"id":"1294"},{"id":"1299"},{"id":"1304"},{"id":"1309"},{"id":"1314"},{"id":"1319"},{"id":"1324"},{"id":"1329"}],"sizing_mode":"stretch_both","title":{"id":"1207"},"toolbar":{"id":"1225"},"toolbar_location":null,"toolbar_sticky":false,"visible":false,"x_range":{"id":"1209"},"x_scale":{"id":"1213"},"y_range":{"id":"1211"},"y_scale":{"id":"1215"}},"id":"1206","subtype":"Figure","type":"Plot"},{"attributes":{"formatter":{"id":"1553"},"major_label_policy":{"id":"1554"},"ticker":{"id":"1079"}},"id":"1078","type":"LinearAxis"},{"attributes":{"source":{"id":"1057"}},"id":"1059","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"black"},"line_alpha":{"value":0.1},"marker":{"value":"circle_dot"},"size":{"value":3},"x":{"field":"xs"},"y":{"field":"chance_ys"}},"id":"1190","type":"Scatter"},{"attributes":{"data_source":{"id":"1057"},"glyph":{"id":"1046"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1059"}},"id":"1058","type":"GlyphRenderer"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 1) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1229","type":"CustomJSTransform"},{"attributes":{"source":{"id":"1182"}},"id":"1192","type":"CDSView"},{"attributes":{"data":{},"selected":{"id":"1610"},"selection_policy":{"id":"1609"}},"id":"1060","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#7D7DCE"},"line_alpha":{"value":0.1},"line_color":{"value":"#6464B5"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1195","type":"Scatter"},{"attributes":{"data_source":{"id":"1060"},"glyph":{"id":"1047"},"hover_glyph":null,"muted_glyph":null,"view":{"id":"1062"}},"id":"1061","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1182"},"glyph":{"id":"1189"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1190"},"view":{"id":"1192"}},"id":"1191","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1182"},"glyph":{"id":"1194"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1195"},"view":{"id":"1197"}},"id":"1196","type":"GlyphRenderer"},{"attributes":{"axis":{"id":"1078"},"dimension":1,"grid_line_color":"black","ticker":null,"visible":false},"id":"1081","type":"Grid"},{"attributes":{"fill_alpha":{"field":"highlight_alphas"},"fill_color":{"value":"#7D7DCE"},"line_alpha":{"field":"highlight_alphas"},"line_color":{"value":"#6464B5"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1194","type":"Scatter"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 2) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1231","type":"CustomJSTransform"},{"attributes":{"source":{"id":"1182"}},"id":"1197","type":"CDSView"},{"attributes":{},"id":"1568","type":"BasicTickFormatter"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#8AD3AA"},"height":{"field":"blockedm_y"},"line_alpha":{"value":0},"line_color":{"value":"#8AD3AA"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedm_y","transform":{"id":"1114"}}},"id":"1139","type":"Rect"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"heights"},"line_alpha":{"value":0.1},"line_color":{"value":"#CE7D7D"},"width":{"value":1},"x":{"field":"xs"},"y":{"value":0}},"id":"1200","type":"Rect"},{"attributes":{},"id":"1569","type":"AllLabels"},{"attributes":{},"id":"1079","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1160"}]},"id":"1082","type":"Toolbar"},{"attributes":{"source":{"id":"1109"}},"id":"1132","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"heights"},"line_alpha":{"value":0},"line_color":{"value":"#CE7D7D"},"width":{"value":1},"x":{"field":"xs"},"y":{"value":0}},"id":"1199","type":"Rect"},{"attributes":{"data":{"text":["Rounds played: 0","Total score: 0","","",""],"x":[2,70,2,14,14],"y":[86,86,5,40,32]},"selected":{"id":"1612"},"selection_policy":{"id":"1611"}},"id":"1472","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#3F6750"},"line_alpha":{"value":0.1},"line_color":{"value":"#3F6750"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1085","type":"Circle"},{"attributes":{"background_fill_color":"white","below":[{"id":"1347"}],"center":[{"id":"1350"},{"id":"1354"}],"height":360,"left":[{"id":"1351"}],"outline_line_color":"black","renderers":[{"id":"1360"},{"id":"1365"},{"id":"1370"},{"id":"1376"},{"id":"1381"},{"id":"1386"},{"id":"1391"},{"id":"1396"},{"id":"1401"},{"id":"1406"},{"id":"1411"},{"id":"1416"},{"id":"1421"},{"id":"1426"},{"id":"1431"},{"id":"1436"},{"id":"1441"},{"id":"1446"},{"id":"1451"},{"id":"1456"},{"id":"1461"},{"id":"1466"}],"sizing_mode":"stretch_both","title":{"id":"1337"},"toolbar":{"id":"1355"},"toolbar_location":null,"toolbar_sticky":false,"visible":false,"x_range":{"id":"1339"},"x_scale":{"id":"1343"},"y_range":{"id":"1341"},"y_scale":{"id":"1345"}},"id":"1336","subtype":"Figure","type":"Plot"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1129"},"hover_glyph":null,"muted_glyph":null,"name":"Blocked Left","nonselection_glyph":{"id":"1130"},"view":{"id":"1132"}},"id":"1131","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1182"},"glyph":{"id":"1199"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1200"},"view":{"id":"1202"}},"id":"1201","type":"GlyphRenderer"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1535"}]},"label":"Figure 4","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1497","type":"Button"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1257"},"hover_glyph":null,"muted_glyph":null,"name":"4","nonselection_glyph":{"id":"1258"},"view":{"id":"1260"}},"id":"1259","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"#AFC8AF"},"line_color":{"value":"#96AF96"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"lr_ys"}},"id":"1262","type":"Scatter"},{"attributes":{"source":{"id":"1228"}},"id":"1260","type":"CDSView"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 4) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1235","type":"CustomJSTransform"},{"attributes":{"callback":null,"formatters":{"@xs":{"id":"1203"}},"point_policy":"follow_mouse","renderers":[{"id":"1201"}],"tooltips":"\n&lt;div&gt;\n  &lt;font size=\"1pt\"&gt;&lt;p&gt;Iteration: @xs{custom}&lt;br&gt;\nScore: @ys&lt;/p&gt;&lt;/font&gt;\n&lt;/div&gt;\n"},"id":"1204","type":"HoverTool"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#64A580"},"height":{"field":"blockedl_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#64A580"},"width":{"field":"hovered_widths","transform":{"id":"1113"}},"x":{"field":"x"},"y":{"field":"blockedl_y","transform":{"id":"1112"}}},"id":"1135","type":"Rect"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1534"}]},"label":"Figure 3","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1496","type":"Button"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb6"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb6","transform":{"id":"1240"}}},"id":"1298","type":"Rect"},{"attributes":{"text":"-1"},"id":"1227","type":"Div"},{"attributes":{"source":{"id":"1109"}},"id":"1137","type":"CDSView"},{"attributes":{"args":{"src":{"id":"1182"}},"code":"\nconst index = special_vars.index;\nconst data = src.data;\n\ndata['highlight_alphas'].fill(0);\ndata['highlight_alphas'][index] = 1;\nsrc.change.emit();\n\nreturn(data['xs'][index].toString());\n"},"id":"1203","type":"CustomJSHover"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#64A580"},"height":{"field":"blockedl_y"},"line_alpha":{"value":0.1},"line_color":{"value":"#64A580"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedl_y","transform":{"id":"1112"}}},"id":"1130","type":"Rect"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#64A580"},"height":{"field":"blockedl_y"},"line_alpha":{"value":0},"line_color":{"value":"#64A580"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"blockedl_y","transform":{"id":"1112"}}},"id":"1129","type":"Rect"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1297"},"hover_glyph":null,"muted_glyph":null,"name":"0","nonselection_glyph":{"id":"1298"},"view":{"id":"1300"}},"id":"1299","type":"GlyphRenderer"},{"attributes":{},"id":"1215","type":"LinearScale"},{"attributes":{},"id":"1571","type":"BasicTickFormatter"},{"attributes":{},"id":"1211","type":"Range1d"},{"attributes":{},"id":"1572","type":"AllLabels"},{"attributes":{},"id":"1213","type":"LinearScale"},{"attributes":{"fill_color":{"value":"#64A580"},"height":{"field":"blockedl_y"},"line_color":{"value":"#64A580"},"width":{"field":"hovered_widths","transform":{"id":"1113"}},"x":{"field":"x"},"y":{"field":"blockedl_y","transform":{"id":"1112"}}},"id":"1134","type":"Rect"},{"attributes":{"data_source":{"id":"1109"},"glyph":{"id":"1134"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1135"},"view":{"id":"1137"}},"id":"1136","type":"GlyphRenderer"},{"attributes":{"text":"Keeper's Perceived Risks Over Iterations","text_font_size":"16pt"},"id":"1207","type":"Title"},{"attributes":{"end":50.5,"start":-0.5},"id":"1209","type":"Range1d"},{"attributes":{"data":{"alphas_zeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb1":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb2":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb3":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb4":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb5":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hb6":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlight_alphas":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"ll_ys":[0.76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"lm_ys":[0.65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"lr_ys":[0.763333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"rl_ys":[0.746666,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"rm_ys":[0.66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"rr_ys":[0.783333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"xs":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50]},"selected":{"id":"1626"},"selection_policy":{"id":"1625"}},"id":"1228","type":"ColumnDataSource"},{"attributes":{"formatter":{"id":"1568"},"major_label_policy":{"id":"1569"},"ticker":{"id":"1218"}},"id":"1217","type":"LinearAxis"},{"attributes":{"data":{},"selected":{"id":"1614"},"selection_policy":{"id":"1613"}},"id":"1083","type":"ColumnDataSource"},{"attributes":{"fill_color":{"value":"#3F6750"},"line_color":{"value":"#3F6750"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1084","type":"Circle"},{"attributes":{},"id":"1218","type":"BasicTicker"},{"attributes":{"data_source":{"id":"1083"},"glyph":{"id":"1084"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1085"},"view":{"id":"1087"}},"id":"1086","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1312"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1313"},"view":{"id":"1315"}},"id":"1314","type":"GlyphRenderer"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 3) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1233","type":"CustomJSTransform"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2)\n);\n\nreturn newXs;\n"},"id":"1230","type":"CustomJSTransform"},{"attributes":{"source":{"id":"1083"}},"id":"1087","type":"CDSView"},{"attributes":{"fill_color":{"value":"#64A580"},"line_color":{"value":"#64A580"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1089","type":"Circle"},{"attributes":{"source":{"id":"1088"}},"id":"1092","type":"CDSView"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 5) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1237","type":"CustomJSTransform"},{"attributes":{"data":{},"selected":{"id":"1616"},"selection_policy":{"id":"1615"}},"id":"1088","type":"ColumnDataSource"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2 + data['hb1'][i])\n);\n\nreturn newXs;\n"},"id":"1232","type":"CustomJSTransform"},{"attributes":{"data_source":{"id":"1088"},"glyph":{"id":"1089"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1090"},"view":{"id":"1092"}},"id":"1091","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1233"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1233"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"lr_ys"}},"id":"1312","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#64A580"},"line_alpha":{"value":0.1},"line_color":{"value":"#64A580"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1090","type":"Circle"},{"attributes":{"args":{"alphasZeroes":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"highlightIndex":{"id":"1226"}},"v_func":"\nconst index = parseInt(highlightIndex.text);\nif(xs[index] === 6) {\n  const newAlphas = new Array(xs.length).fill(0);\n  newAlphas[index] = 1;\n  return newAlphas;\n} else { return alphasZeroes; }\n"},"id":"1239","type":"CustomJSTransform"},{"attributes":{"source":{"id":"1098"}},"id":"1102","type":"CDSView"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2 + data['hb2'][i] + data['hb1'][i])\n);\n\nreturn newXs;\n"},"id":"1234","type":"CustomJSTransform"},{"attributes":{"args":{"src":{"id":"1109"}},"v_func":"\nconst newXs = new Array(xs.length);\nxs.forEach(\n  (v, i) =&gt; newXs[i] = v/2\n);\nreturn newXs;\n"},"id":"1110","type":"CustomJSTransform"},{"attributes":{"data_source":{"id":"1093"},"glyph":{"id":"1094"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1095"},"view":{"id":"1097"}},"id":"1096","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1472"}},"id":"1475","type":"CDSView"},{"attributes":{"source":{"id":"1093"}},"id":"1097","type":"CDSView"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2 + data['hb3'][i] + data['hb2'][i] + data['hb1'][i])\n);\n\nreturn newXs;\n"},"id":"1236","type":"CustomJSTransform"},{"attributes":{"fill_color":{"value":"#8AD3AA"},"line_color":{"value":"#8AD3AA"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1094","type":"Circle"},{"attributes":{"data":{},"selected":{"id":"1618"},"selection_policy":{"id":"1617"}},"id":"1093","type":"ColumnDataSource"},{"attributes":{"editor":{"id":"1580"},"field":"footedness","formatter":{"id":"1579"},"title":"Footedness","width":77},"id":"1509","type":"TableColumn"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#CBEBD9"},"line_alpha":{"value":0.1},"line_color":{"value":"#CBEBD9"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1100","type":"Circle"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2 + data['hb4'][i] + data['hb3'][i] + data['hb2'][i] + data['hb1'][i])\n);\n\nreturn newXs;\n"},"id":"1238","type":"CustomJSTransform"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1242"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1243"},"view":{"id":"1245"}},"id":"1244","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb2"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb2","transform":{"id":"1232"}}},"id":"1258","type":"Rect"},{"attributes":{"data_source":{"id":"1098"},"glyph":{"id":"1099"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1100"},"view":{"id":"1102"}},"id":"1101","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"#CBEBD9"},"line_color":{"value":"#CBEBD9"},"radius":{"value":0},"x":{"value":0},"y":{"value":0}},"id":"1099","type":"Circle"},{"attributes":{"source":{"id":"1228"}},"id":"1315","type":"CDSView"},{"attributes":{"data":{},"selected":{"id":"1620"},"selection_policy":{"id":"1619"}},"id":"1098","type":"ColumnDataSource"},{"attributes":{"args":{"src":{"id":"1228"}},"v_func":"\nconst newXs = [];\nconst data = src.data;\nxs.forEach(\n  (v, i) =&gt; newXs.push(v/2 + data['hb5'][i] + data['hb4'][i] + data['hb3'][i] + data['hb2'][i] + data['hb1'][i])\n);\n\nreturn newXs;\n"},"id":"1240","type":"CustomJSTransform"},{"attributes":{"background_fill_alpha":0,"border_line_alpha":0,"items":[{"id":"1107"},{"id":"1108"}],"label_height":10,"label_text_font_size":"10pt","location":[68,40],"orientation":"horizontal","padding":0},"id":"1106","type":"Legend"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#C8AFAF"},"line_alpha":{"value":0.1},"line_color":{"value":"#AF9696"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ll_ys"}},"id":"1243","type":"Scatter"},{"attributes":{"label":{"value":"Goalie Blocked By Going Left"},"renderers":[{"id":"1091"}]},"id":"1105","type":"LegendItem"},{"attributes":{"fill_color":{"value":"#C8AFAF"},"line_color":{"value":"#AF9696"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ll_ys"}},"id":"1242","type":"Scatter"},{"attributes":{"label":{"value":"Scored"},"renderers":[{"id":"1086"}]},"id":"1104","type":"LegendItem"},{"attributes":{"source":{"id":"1228"}},"id":"1310","type":"CDSView"},{"attributes":{"source":{"id":"1228"}},"id":"1250","type":"CDSView"},{"attributes":{"source":{"id":"1228"}},"id":"1245","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb1"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb1","transform":{"id":"1230"}}},"id":"1247","type":"Rect"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1235"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1235"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rl_ys"}},"id":"1317","type":"Scatter"},{"attributes":{"label":{"value":"Goalie Blocked By Going Right"},"renderers":[{"id":"1101"}]},"id":"1108","type":"LegendItem"},{"attributes":{"fill_color":{"value":"#C8C8AF"},"line_color":{"value":"#AFAF96"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"lm_ys"}},"id":"1252","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb1"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb1","transform":{"id":"1230"}}},"id":"1248","type":"Rect"},{"attributes":{"label":{"value":"Goalie Blocked By Going Middle"},"renderers":[{"id":"1096"}]},"id":"1107","type":"LegendItem"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"lr_ys"}},"id":"1313","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb2"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb2","transform":{"id":"1232"}}},"id":"1257","type":"Rect"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1247"},"hover_glyph":null,"muted_glyph":null,"name":"5","nonselection_glyph":{"id":"1248"},"view":{"id":"1250"}},"id":"1249","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1404"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1405"},"view":{"id":"1407"}},"id":"1406","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1228"}},"id":"1255","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#3F6750"},"height":{"field":"scored_y"},"line_alpha":{"value":0},"line_color":{"value":"#3F6750"},"width":{"value":1},"x":{"field":"x"},"y":{"field":"scored_y","transform":{"id":"1110"}}},"id":"1119","type":"Rect"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1252"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1253"},"view":{"id":"1255"}},"id":"1254","type":"GlyphRenderer"},{"attributes":{"data":{"blockedl_y":[0.0,0.0,0.0,0.0,0.0,0.0],"blockedm_y":[0.0,0.0,0.0,0.0,0.0,0.0],"blockedr_y":[0.0,0.0,0.0,0.0,0.0,0.0],"hovered_widths":["","","","","",""],"scored_y":[0.0,0.0,0.0,0.0,0.0,0.0],"x":[0.5,1.5,2.5,3.5,4.5,5.5]},"selected":{"id":"1622"},"selection_policy":{"id":"1621"}},"id":"1109","type":"ColumnDataSource"},{"attributes":{"fill_color":{"value":"#ECDF41"},"line_color":{"value":"#D8CB2D"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1358","type":"Scatter"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1419"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1420"},"view":{"id":"1422"}},"id":"1421","type":"GlyphRenderer"},{"attributes":{},"id":"1547","type":"BasicTickFormatter"},{"attributes":{},"id":"1548","type":"AllLabels"},{"attributes":{"args":{"chancesValidDiv":{"id":"1487"},"counterMadeDiv":{"id":"1486"},"cpuSelectedDiv":{"id":"1485"},"makeCounterButton":{"id":"1492"},"startAutomateButton":{"id":"1490"}},"code":"\nconst counterMadeText = counterMadeDiv.text;\nconst chancesValidText = chancesValidDiv.text;\n\nconst canAccessMakeCounter = (\n  counterMadeText !== '1' &amp;&amp; chancesValidText === '1'\n);\nconst canAccessStartAutomate = (\n  counterMadeText === '1' &amp;&amp;\n  chancesValidText === '1' &amp;&amp;\n  cpuSelectedDiv.text === '1'\n);\n\nstartAutomateButton.visible = canAccessStartAutomate;\nmakeCounterButton.visible = canAccessMakeCounter;\n"},"id":"1527","type":"CustomJS"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"field":"ys","transform":{"id":"1372"}}},"id":"1375","type":"Line"},{"attributes":{"source":{"id":"1356"}},"id":"1422","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#ECDF41"},"line_alpha":{"value":0.1},"line_color":{"value":"#D8CB2D"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1359","type":"Scatter"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1358"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1359"},"view":{"id":"1361"}},"id":"1360","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.7}},"id":"1420","type":"Line"},{"attributes":{"source":{"id":"1356"}},"id":"1361","type":"CDSView"},{"attributes":{"fill_alpha":{"field":"highlight_alphas"},"fill_color":{"value":"#ECB841"},"line_alpha":{"field":"highlight_alphas"},"line_color":{"value":"#D8A42D"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1363","type":"Scatter"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.7}},"id":"1419","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1363"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1364"},"view":{"id":"1366"}},"id":"1365","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#ECB841"},"line_alpha":{"value":0.1},"line_color":{"value":"#D8A42D"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"ys"}},"id":"1364","type":"Scatter"},{"attributes":{"source":{"id":"1356"}},"id":"1377","type":"CDSView"},{"attributes":{"source":{"id":"1356"}},"id":"1366","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"value":0.5},"line_alpha":{"value":0.1},"width":{"value":1},"x":{"field":"xs"},"y":{"value":0.75}},"id":"1369","type":"Rect"},{"attributes":{"sizing_mode":"stretch_width","text":"Chances cannot be less than 0","visible":false},"id":"1482","type":"Div"},{"attributes":{"line_color":"#000000","x":{"field":"xs"},"y":{"field":"ys","transform":{"id":"1372"}}},"id":"1374","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.65}},"id":"1384","type":"Line"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"value":0.5},"line_alpha":{"value":0},"width":{"value":1},"x":{"field":"xs"},"y":{"value":0.75}},"id":"1368","type":"Rect"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1414"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1415"},"view":{"id":"1417"}},"id":"1416","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1356"}},"id":"1371","type":"CDSView"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1368"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1369"},"view":{"id":"1371"}},"id":"1370","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.73}},"id":"1415","type":"Line"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1536"}]},"label":"Start","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1490","type":"Button"},{"attributes":{"v_func":"\nlet newXs = [];\nxs.forEach(\n  (v, i) =&gt; (newXs.push((i !== 0) ? ((v + i * newXs[i - 1]) / (i + 1)) : v))\n);\n\nreturn newXs;\n"},"id":"1372","type":"CustomJSTransform"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1374"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1375"},"view":{"id":"1377"}},"id":"1376","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1356"}},"id":"1382","type":"CDSView"},{"attributes":{"source":{"id":"1356"}},"id":"1417","type":"CDSView"},{"attributes":{},"id":"1623","type":"UnionRenderers"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.55}},"id":"1380","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.55}},"id":"1379","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.73}},"id":"1414","type":"Line"},{"attributes":{"args":{"src":{"id":"1356"}},"code":"\nconst index = special_vars.index;\nconst data = src.data;\ndata['highlight_alphas'].fill(0);\ndata['highlight_alphas'][index] = 1;\nsrc.change.emit();\nreturn data['ys'][index].toString();\n"},"id":"1468","type":"CustomJSHover"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1530"}]},"label":"Make Counter","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1492","type":"Button"},{"attributes":{},"id":"1624","type":"Selection"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1379"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1380"},"view":{"id":"1382"}},"id":"1381","type":"GlyphRenderer"},{"attributes":{"sizing_mode":"stretch_width","text":"Chances must add up to 1","visible":false},"id":"1484","type":"Div"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.74}},"id":"1440","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1384"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1385"},"view":{"id":"1387"}},"id":"1386","type":"GlyphRenderer"},{"attributes":{"js_property_callbacks":{"change:text":[{"id":"1527"}]},"text":"0","visible":false},"id":"1487","type":"Div"},{"attributes":{"source":{"id":"1356"}},"id":"1412","type":"CDSView"},{"attributes":{"source":{"id":"1356"}},"id":"1387","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.65}},"id":"1385","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.95}},"id":"1410","type":"Line"},{"attributes":{"source":{"id":"1356"}},"id":"1427","type":"CDSView"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Right-Footed Kicker Kicking to the Middle Selection Chance","value":"0","visible":false},"id":"1505","type":"TextInput"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.67}},"id":"1424","type":"Line"},{"attributes":{"args":{"advSpdSlider":{"id":"1500"},"autoAdvButton":{"id":"1498"},"ball":{"id":"1045"},"chancesSrc":{"id":"1519"},"counterSrc":{"id":"1529"},"distTable":{"id":"1516"},"distTableSrc":{"id":"1508"},"gameFig":{"id":"1003"},"gameFigButton":{"id":"1493"},"goalieBody":{"id":"1044"},"goalieHead":{"id":"1043"},"inAnIter":{"id":"1488"},"iterSlider":{"id":"1499"},"nextButton":{"id":"1491"},"nround":{"id":"1478"},"score":{"id":"1479"},"statsFig1":{"id":"1063"},"statsFig1Butto":{"id":"1494"},"statsFig1Src":{"id":"1109"},"statsFig2":{"id":"1162"},"statsFig2Butto":{"id":"1495"},"statsFig2Src":{"id":"1182"},"statsFig3":{"id":"1206"},"statsFig3Butto":{"id":"1496"},"statsFig3Src":{"id":"1228"},"statsFig4":{"id":"1336"},"statsFig4Butto":{"id":"1497"},"statsFig4Src":{"id":"1356"},"stratToUseDiv":{"id":"1480"},"txt":{"id":"1472"}},"code":"\nconst rDict = {\n  'LeftLeft'   : 0.55, 'LeftMiddle'   : 0.65, 'LeftRight'   : 0.93,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.95, 'RightMiddle'  : 0.73, 'RightRight'  : 0.70\n};\nconst lDict = {\n  'LeftLeft'   : 0.67, 'LeftMiddle'   : 0.70, 'LeftRight'   : 0.96,\n  'MiddleLeft' : 0.74, 'MiddleMiddle' : 0.60, 'MiddleRight' : 0.72,\n  'RightLeft'  : 0.87, 'RightMiddle'  : 0.65, 'RightRight'  : 0.61\n};\nconst scoreProbDicts = {\n  'Right' : rDict,\n  'Left'  : lDict\n};\n\nconst directions = ['Left', 'Middle', 'Right'];\n\nconst arrSumFunc = ((a, b) =&gt; a + b);\n\nconst chances = chancesSrc.data['chances'];\nconst distData = distTableSrc.data;\nconst freq = distData['freq'];\n\nfunction gameIter(){\n  const itersToRun = iterSlider.value;\n\n  const gameStrat = stratToUseDiv.text;\n\n  const stratIsFictPlay = (gameStrat === 'Fictitious_Play');\n\n  let perceivedRiskL;\n  let perceivedRiskM;\n  let perceivedRiskR;\n\n  let goalieAction = '';\n\n  let kickerFoot = '';\n  let kickerKick = '';\n\n  let goal = 0;\n  let gameScore = 0;\n  let roundsPlayed = 0;\n\n  let roundScoreChance = 0;\n\n  [kickerFoot, kickerKick] = rollKickerAction();\n\n  const footIsLeft = (kickerFoot === 'Left');\n  const footDict = scoreProbDicts[kickerFoot];\n  const kfRAdjust = (footIsLeft) ? 0 : 3;\n\n  switch(gameStrat) {\n    case 'Fictitious_Play':\n      [goalieAction, perceivedRiskL, perceivedRiskM, perceivedRiskR] = (\n        fictitiousPlay(footIsLeft, footDict)\n      );\n      break;\n    case 'Mixed_Strategy':\n      goalieAction = optimalMixed(kickerFoot);\n      break;\n    case 'Random':\n      goalieAction = randomChoice();\n      break;\n    case 'Goalie_Cheats':\n      goalieAction = goalieCheats(kickerFoot);\n      break;\n    default:\n      //TODO throw an error\n      break;\n  }\n\n  const directionsIndexGa = directions.indexOf(goalieAction); //DirectionsIndexGoalieAction\n  const actionsIndexKFKK = kfRAdjust + directions.indexOf(kickerKick); //Actions index KFKK\n\n  [goal, gameScore, roundsPlayed, roundScoreChance] = scoring(\n    footDict,\n    kickerKick,\n    goalieAction,\n    actionsIndexKFKK\n  );\n\n  const roundIsLastIter = (roundsPlayed &gt;= itersToRun);\n\n  animateIter(goalieAction, kickerKick, goal);\n\n  goalieDecisionTracking(\n    actionsIndexKFKK,\n    kfRAdjust,\n    directionsIndexGa,\n    stratIsFictPlay,\n    perceivedRiskL,\n    perceivedRiskM,\n    perceivedRiskR\n  );\n\n  updateFig1(goal, directionsIndexGa, actionsIndexKFKK, roundIsLastIter);\n\n  updateFig2(\n    roundsPlayed,\n    gameScore,\n    roundScoreChance,\n    roundIsLastIter,\n    itersToRun\n  );\n\n  if(stratIsFictPlay) { updateFig3(roundsPlayed, roundIsLastIter, itersToRun); }\n\n  updateFig4(\n    roundsPlayed,\n    roundScoreChance,\n    kickerFoot,\n    kickerKick,\n    goalieAction\n  );\n\n  if(roundIsLastIter) { handleFigVisibility(stratIsFictPlay); }\n\n  iterText(roundsPlayed, gameScore, goal);\n}\n\n//Setup the promise that enforces waiting for the delay to finish:\nconst iterationDelay = (\n  //Creates the promise with parameter ms:\n  (ms) =&gt; new Promise(\n    //Waits for ms seconds before resolving:\n    (resolve) =&gt; setTimeout(\n      () =&gt; {\n        resolve();\n      },\n      ms\n    )\n  )\n);\n\nasync function gameLoop(){\n  /**\n  * An async function that runs each iteration of the game. Recurses after a\n  * delay if the necessary conditions are fulfilled.\n  */\n  //Take value for if another iteration is running:\n  let tempIterVal = inAnIter.text;\n\n  //If there is not another iteration running:\n  if(tempIterVal === 'false'){\n    //Set the value of inAnIter to reflect that an iteration is now running:\n    inAnIter.text = 'true';\n\n    //Run the game iteration:\n    gameIter();\n\n    //Tell itself that it has finished running the iteration:\n    tempIterVal = 'false';\n\n    //True if not in the last iteration of the game:\n    const notLastRound = (parseInt(nround.text) &lt; iterSlider.value);\n\n    //True if the button is activated by the user:\n    const autoAdvActive = (autoAdvButton.active);\n\n    //True if both conditions are true:\n    const conditionsFulfilled = (notLastRound &amp;&amp; autoAdvActive);\n\n    //If all recursion conditions are fulfilled:\n    if(conditionsFulfilled){\n      //Await the delay, then recurse:\n      await iterationDelay(advSpdSlider.value).then(\n        () =&gt; {\n          //Designate that an iteration is no longer running:\n          inAnIter.text = 'false';\n\n          //Recurse:\n          gameLoop();\n        }\n      );\n    } else {\n      //Designate that an iteration is no longer running:\n      inAnIter.text = 'false';\n    }\n  }\n}\n\ngameLoop();\n\nfunction iterText(roundsPlayed, gameScore, goal) {\n  /**\n   * Changes the game text to display the rounds played, game score and the\n   * kicker's scoring result.\n   * @param{string} roundsPlayed -- A string containing an int that shows the\n   * iterations run.\n   * @param{string} gameScore -- A string containing an int that shows the\n   * current iteration's score.\n   * @param{int} goal -- An int equal to either 1 or -1. Value of 1 is for if a\n   * goal was scored during the iteration.\n   */\n  //Set Game Text Lines:\n  txt.data['text'] = [\n    `Rounds played: ${roundsPlayed}`,\n    `Total score: ${gameScore}`,\n    '',\n    (goal === 1) ? 'GOAL!' : 'Blocked'\n  ];\n  txt.change.emit(); //Finalize changes by emitting to source\n}\n\nfunction rollKickerAction() {\n  /**\n  * Selects a kicker pure strategy by converting the pure strategy selection\n  * chances array to a form where each value has the previous values added to\n  * them, so that the strategy can then be chosen by comparing the values to a\n  * random roll. The kicker foot and direction are then determined according to\n  * the strategy index before being returned in an array.\n  * @return{array} -- An array that contains strings representing the kicker\n  * foot, and their chosen kick direction. The kicker foot string can have value\n  * equal to 'Left' or 'Right', and the kick direction has to be equal to either\n  * 'Left', 'Middle', or 'Right'.\n  */\n  //Copy chances into array, then modify array to act as roll thresholds:\n  let arrVals = [0].concat(chances.slice());\n  arrVals.slice(1).forEach(\n    (v, i) =&gt; arrVals[i + 1] += arrVals[i]\n  );\n\n  //Determine actions to take based off roll comparison to thresholds:\n  let index = 5;\n  const roll = Math.random();\n  arrVals.slice(0, 6).forEach(\n    (v) =&gt; {\n      if(roll &lt; v) { index -= 1; }\n    }\n  );\n  return [\n    (index &lt; 3) ? 'Left' : 'Right',\n    directions[(index % 3)]\n  ];\n}\n\n//Handle Goalie Decision\nfunction fictitiousPlay(footIsLeft, footDict) {\n  /**\n  * Determines the keeper's action according to Fictitious Play.\n  * @param{bool} footIsLeft -- a bool containing whether or not the kicker is\n  * left-footed.\n  * @param{dict} footDict -- The dict that contains the score chances for the\n  * different possible kicker foot kicker action outcomes.\n  * @return{array} -- An array containing the direction for the keeper to dive,\n  * and the keeper's perceived risks for each possible action from left to\n  * right.\n  */\n  //Set decision making values to use according to kickerFoot:\n  const freqs = (footIsLeft) ? freq.slice(0, 3) : freq.slice(3, 6);\n\n  //Calculate goalie perceived risks:\n  const tsr = freqs.reduce(arrSumFunc);\n  const eFreqs = (tsr !== 0) ? freqs.map(x =&gt; x / tsr) : [1/3, 1/3, 1/3];\n  const risks = [0, 0, 0];\n  directions.forEach(\n    (v1, i) =&gt; directions.forEach(\n      (v2, j) =&gt; risks[i] += eFreqs[j] * footDict[v2 + v1]\n    )\n  );\n\n  //return goalie action and perceived risks:\n  const actionIndex = risks.indexOf(Math.min(...risks));\n  return [\n    directions[actionIndex],\n    ...risks\n  ];\n}\n\nfunction optimalMixed(kickerFoot) {\n  /**\n  * Determines the keeper's action according to the optimal mixed strategy for\n  * the keeper.\n  * param{string} kickerFoot -- Either 'Left' or 'Right' representing the\n  * kicker's footedness.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //selects and returns an action based off of optimal mixed strategy chances:\n  const thresholds = {\n    'Left'  : 0.8,\n    'Right' : 0.7419\n  };\n  const goKickerFoot = (Math.random() &gt;= thresholds[kickerFoot]);\n  return (goKickerFoot) ? kickerFoot : 'Middle';\n}\n\nfunction randomChoice() {\n  /**\n  * Determines the keeper's action at random.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //Selects and returns an action from directions at an equal chance:\n  const actionIndex = Math.round(Math.random()*3 - 0.5);\n  return directions[actionIndex];\n}\n\nfunction goalieCheats(kickerFoot) {\n  /**\n  * Determines the keeper's action according to a previously created strategy.\n  * param{string} kickerFoot -- Either 'Left' or 'Right' representing the\n  * kicker's footedness.\n  * return{string} -- Either 'Left', 'Middle', or 'Right' representing the\n  * keeper's direction to dive.\n  */\n  //return the action of the pure strategy corresponding to the kicker foot:\n\n  const actionIndex = counterSrc.data[kickerFoot].indexOf(1);\n  return directions[actionIndex];\n}\n\nfunction handleFigVisibility(stratIsFictPlay) {\n  nextButton.visible = false;\n  distTable.visible = false;\n  autoAdvButton.visible = false;\n  advSpdSlider.visible = false;\n  gameFigButton.visible = true;\n\n  statsFig1Button.visible = true;\n  statsFig1.visible = false;\n\n  statsFig2Button.visible = true;\n  statsFig2.visible = false;\n\n  statsFig3Button.visible = stratIsFictPlay;\n  statsFig3.visible = false;\n\n  statsFig4Button.visible = true;\n  statsFig4.visible = false;\n\n}\n\nfunction scoring(footDict, kickerKick, goalieAction, actionsIndexKFKK) {\n  /**\n  * Handles the scoring for the game.\n  * param{dict} footDict -- The dict containing the score chances according to\n  * the different possible kicker kick direction and keeper dive direction\n  * outcomes for the kicker's footedness.\n  * param{string} kickerKick -- Either 'Left', 'Middle', or 'Right' for the\n  * kicker's kick direction.\n  * param{string} goalieAction -- Either 'Left', 'Middle', or 'Right' for the\n  * keeper's dive direction.\n  * param{int} actionsIndexKFKK -- an int designating an index selected\n  * previously according to the kicker's footedness and kick directions.\n  */\n  //Set function values:\n  const scoreRoll = Math.random();\n  const scoreChance = footDict[kickerKick + goalieAction];\n  const roundsPlayed = parseInt(nround.text) + 1;\n  const roundScore = (scoreRoll &lt;= scoreChance) ? +1 : -1;\n\n  //Update columns:\n  const scoreChanceCol = distData['striker_score_chance'];\n  const scoreRollCol = distData['striker_score_roll'];\n  scoreChanceCol.fill(0);\n  scoreRollCol.fill(0);\n  scoreChanceCol[actionsIndexKFKK] = scoreChance;\n  scoreRollCol[actionsIndexKFKK] = scoreRoll.toPrecision(6);\n\n  //Update text:\n  nround.text = roundsPlayed.toString();\n  const currentGameScore = parseInt(score.text) + roundScore;\n  score.text = currentGameScore.toString();\n\n  return [roundScore, currentGameScore, roundsPlayed, scoreChance];\n}\n\nfunction _moveGoalie(xLoc) {\n  /**\n  * Moves the goalie to the specified x coordinate.\n  * param{int} xLoc -- The x coord to move to.\n  */\n  //Move both components of the goalie:\n  goalieBody.x = xLoc;\n  goalieHead.x = xLoc;\n}\n\nfunction animateIter(goalieAction, kickerKick, goal) {\n  /**\n  * Handles the animation for the iteration.\n  * @param{string} goalieAction -- Either 'Left', 'Middle', 'Right' signifying\n  * the keeper's dive direction.\n  * @param{string} kickerKick -- Either 'Left', 'Middle', 'Right' signifying the\n  * kicker's kick direction.\n  * @param{int} goal -- Either 1 or -1 for the iteration score change.\n  */\n  //Set positions and store ball roll for handling cases:\n  const goalieActionIsKickerKick = (goalieAction === kickerKick);\n  const goalNotScored = (goal === -1);\n  const gPos = {\n    'Left'   : [37, 43],\n    'Middle' : [47, 53],\n    'Right'  : [57, 63]\n  };\n  const outOfGoalPos = {\n    'Left'   : [30, 30],\n    'Middle' : [30, 70],\n    'Right'  : [70, 70]\n  };\n  const shotUnluckyMiss = (goalNotScored &amp;&amp; !goalieActionIsKickerKick);\n  const bPos = (shotUnluckyMiss) ? outOfGoalPos : gPos;\n  const bRoll = Math.round(Math.random());\n\n  ball.x = bPos[kickerKick][bRoll];\n  ball.y = 63;\n  if(goalieActionIsKickerKick){\n    const goalieRolledX = gPos[goalieAction][[1, 0][bRoll]];\n    const goalieX = (goalNotScored) ? ball.x : goalieRolledX;\n    _moveGoalie(goalieX);\n  } else {\n    const goalieX = gPos[goalieAction][Math.round(Math.random())];\n    _moveGoalie(goalieX);\n  }\n}\n\nfunction goalieDecisionTracking(\n  actionsIndexKFKK,\n  kfRAdjust,\n  directionsIndexGa,\n  stratIsFictPlay,\n  perceivedRiskL,\n  perceivedRiskM,\n  perceivedRiskR\n) {\n  /**\n  * Tracks game data and puts it into the dist table.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  * @param{int} kfRAdjust -- An int for adjusting indexes if the kicker is\n  * right-footed.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{bool} stratIsFictPlay -- A bool for whether or not the keeper is\n  * using fictitious play.\n  * @param{float} perceivedRiskL -- The keeper's perceived risks for diving left.\n  * @param{float} perceivedRiskM -- The keeper's perceived risks for diving middle.\n  * @param{float} perceivedRiskR -- The keeper's perceived risks for diving right.\n  */\n\n  //Increase corresponding trackers to KFKK and KFGA:\n  freq[actionsIndexKFKK] += 1;\n  const decisionsIndex = kfRAdjust + directionsIndexGa;\n  distData['decisions'][decisionsIndex] += 1;\n\n  //Update table perceived risks if fictitious play:\n  if(stratIsFictPlay) {\n    _updateDecisionTableRisks(\n      perceivedRiskL,\n      perceivedRiskM,\n      perceivedRiskR,\n      kfRAdjust\n    );\n  }\n\n  //Update table by finalizing changes to source:\n  distTableSrc.change.emit();\n}\n\nfunction _updateDecisionTableRisks(\n  perceivedRiskL,\n  perceivedRiskM,\n  perceivedRiskR,\n  kfRAdjust\n) {\n  /**\n  * updates the dist table's risk values.\n  * @param{float} perceivedRiskL -- The keeper's perceived risks for diving left.\n  * @param{float} perceivedRiskM -- The keeper's perceived risks for diving middle.\n  * @param{float} perceivedRiskR -- The keeper's perceived risks for diving right.\n  * @param{int} kfRAdjust -- An int for adjusting indexes if the kicker is\n  * right-footed.\n  */\n  //Reset column then set perceived risk for rows corresponding to kicker foot:\n  const risks = distData['goalie_perceived_risks'];\n\n  risks.fill(0);\n  const prs = [\n    perceivedRiskL.toPrecision(6),\n    perceivedRiskM.toPrecision(6),\n    perceivedRiskR.toPrecision(6)\n  ];\n  prs.forEach(\n    (v, i) =&gt; risks[kfRAdjust + i] = v\n  );\n}\n\nfunction _fig1Iter(\n  goal,\n  directionsIndexGa,\n  sections,\n  fig1Data,\n  actionsIndexKFKK\n) {\n  /**\n  * Handles the data for an iteration in Game Stats Figure 1.\n  * @param{int} goal -- Either -1 or 1 for the iterations score change.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{array} sections -- An array containing the column names for the bar\n  * sections in Figure 1.\n  * @param{dict} fig1Data -- The data for game stats figure 1.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  */\n  //Increase section value of iteration result by 1:\n  const sectionIndex = (goal === 1) ? 0 : directionsIndexGa + 1;\n  const section = sections[sectionIndex];\n  fig1Data[section][actionsIndexKFKK] += 1;\n}\n\nfunction _fig1Adjust(sections, fig1Data) {\n  /**\n  * Adjusts Game Stats Figure 1.\n  * @param{array} sections -- An array containing the column names for the bar\n  * sections in Figure 1.\n  * @param{dict} fig1Data -- The data for game stats figure 1.\n  */\n  //Get total heights of kfkk bars:\n  const heights = [0, 0, 0, 0, 0, 0]\n  sections.forEach(\n    (v1) =&gt; fig1Data[v1].forEach(\n      (v2, i) =&gt; heights[i] += v2\n    )\n  );\n\n  //Set y max to 1.1 * the height of the tallest kfkk bar (rounded):\n  statsFig1.y_range.end = Math.round(Math.max(...heights) * 1.1);\n}\n\nfunction updateFig1(\n  goal,\n  directionsIndexGa,\n  actionsIndexKFKK,\n  roundIsLastIter\n) {\n  /**\n  * Updates the data for Game Stats Figure 1.\n  * @param{int} goal -- Either -1 or 1 for the iterations score change.\n  * @param{int} directionsIndexGa -- An int for the index of the keeper\n  * dive direction.\n  * @param{int} actionsIndexKFKK -- An int for adjusting indexes around the\n  * kicker foot and kicker kick directions.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  */\n  //create constants for referencing:\n  const fig1Data = statsFig1Src.data;\n  const sections = ['scored_y', 'blockedl_y', 'blockedm_y', 'blockedr_y'];\n\n  //Update the figure for the iteration:\n  _fig1Iter(goal, directionsIndexGa, sections, fig1Data, actionsIndexKFKK);\n\n  //Make final adjustments if it is the final iteration:\n  if(roundIsLastIter) { _fig1Adjust(sections, fig1Data); }\n\n  //Update the figure by finalizing the changes to the data source:\n  statsFig1Src.change.emit();\n}\n\nfunction _fig2Iter(fig2Data, roundsPlayed, gameScore, roundScoreChance) {\n  /**\n  * Handles an iteration of data for Game Stats Figure 2.\n  * @param{dict} fig2Data -- The data for Game Stats Figure 2.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{int} gameScore -- The score for the game at the current iteration.\n  * @param{float} roundScoreChance -- The chance of scoring for the played iteration.\n  */\n  //Plot Values:\n  fig2Data['ys'][roundsPlayed] = gameScore;\n  fig2Data['chance_ys'][roundsPlayed] = 2*roundScoreChance - 1;\n}\n\nfunction _fig2Adjust(fig2Data, itersToRun) {\n  /**\n  * Adjusts the data for Game Stats Figure 2.\n  * @param{dict} fig2Data -- The data for Game Stats Figure 2.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Adjust chanceYs:\n  const chanceYs = fig2Data['chance_ys'];\n  chanceYs.slice(1).forEach(\n    (v, i) =&gt; chanceYs[i + 1] += chanceYs[i]\n  );\n\n  //Get max and min of figure points:\n  const ys = fig2Data['ys'];\n  let minVal = Math.min(... ys);\n  let maxVal = Math.max(... ys, ...chanceYs);\n\n  //Adjust figure display:\n  const buffer = Math.round((Math.abs(maxVal) + Math.abs(minVal)) * 0.1);\n  maxVal += buffer;\n  minVal -= buffer;\n  statsFig2.y_range.end   = maxVal;\n  statsFig2.y_range.start = minVal;\n\n  //Resize hit boxes:\n  const hitboxHeight = 2 * Math.max(Math.abs(maxVal), Math.abs(minVal));\n  fig2Data['heights'].fill(hitboxHeight);\n}\n\nfunction updateFig2(\n  roundsPlayed,\n  gameScore,\n  roundScoreChance,\n  roundIsLastIter,\n  itersToRun\n) {\n  /**\n  * Updates the data for Game Stats Figure 2.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{int} gameScore -- The score for the game at the current iteration.\n  * @param{float} roundScoreChance -- The chance of scoring for the played iteration.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Store reference to fig 2 data:\n  const fig2Data = statsFig2Src.data;\n\n  //Update the figure for the iteration:\n  _fig2Iter(fig2Data, roundsPlayed, gameScore, roundScoreChance);\n\n  //Adjust the figure as needed if it is the last iteration:\n  if(roundIsLastIter) { _fig2Adjust(fig2Data, itersToRun); }\n\n  //Update the source to finalize the changes to the figure:\n  statsFig2Src.change.emit();\n}\n\nfunction _fig3Iter(ys, roundsPlayed) {\n  /** Handles the data for an iteration for Game Stats Figure 3.\n  * @param{array} ys -- An array containing the ys columns of figure 3.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  */\n  //For each foot:\n  ['Left', 'Right'].forEach(\n    (footVal, footIndex) =&gt; {\n\n      //Calculate emprical frequencies of aim directions for that footedness:\n      const footFreq = freq.slice((3 * footIndex), (3 * (footIndex + 1)));\n      const footTsr = footFreq.reduce(arrSumFunc);\n      const footChances = (\n        (footTsr !== 0) ? footFreq.map(x =&gt; x/footTsr) : [1/3, 1/3, 1/3]\n      );\n\n      //calculate and plot risk of goalie taking each position:\n      directions.forEach(\n        (v1, i1) =&gt; directions.forEach(\n          (v2, i2) =&gt; {\n            const sideRisk = footChances[i2] * scoreProbDicts[footVal][v2 + v1];\n            const ysIndex = 3*footIndex + i1;\n            ys[ysIndex][roundsPlayed] += sideRisk;\n          }\n        )\n      );\n\n    }\n  );\n}\n\nfunction _fig3Adjust(fig3Data, itersToRun, ys) {\n  /**\n  * Adjusts Game Stats Figure 3's data.\n  * @param{dict} fig3Data -- The data for Game Stats figure 3.\n  * @param{int} itersToRun -- The total number of iterations in the game.\n  * @param{array} ys -- An array containing the ys columns of figure 3.\n  */\n  //store fig3Data hb columns for iteration and reference:\n  const hbs = [\n    fig3Data['hb1'],\n    fig3Data['hb2'],\n    fig3Data['hb3'],\n    fig3Data['hb4'],\n    fig3Data['hb5'],\n    fig3Data['hb6']\n  ];\n\n  //Adjustment loop:\n  let vals = [];\n\n  //For every iteration:\n  for(let iter = 0; iter &lt;= itersToRun; iter++){\n    let hbHeights = new Array(6);\n    let risks = new Array(6);\n\n    //For every risk value, send to risks list for later use and push to vals:\n    ys.forEach(\n      (yVal, yIndex) =&gt; {\n        risks[yIndex] = yVal[iter];\n        vals.push(yVal[iter]);\n      }\n    );\n\n    risks.sort((a, b) =&gt; a - b); //Sort risks in ascending order to setup\n\n    //For every entry in risks:\n    risks.forEach(\n      (rVal, rIndex, a) =&gt; {\n        //Set upper edge of hitbox to be equal to halfway between hitbox point\n        //and next point (Set top hitbox edge to 1):\n        let val = (rIndex === 5) ? 1 : ((rVal + a[rIndex + 1]) / 2);\n\n        //subtract heights of all lower hitboxes to get hitbox height:\n        hbHeights.slice(0, rIndex).forEach(\n          (rVal) =&gt; val -= rVal\n        );\n\n        //Save value for use in next hitbox's calculation and plot on graph:\n        hbHeights[rIndex] = val;\n        hbs[rIndex][iter] = val;\n      }\n    );\n  }\n\n  //Adjust graph based off of stored values:\n  const minVal = Math.round(Math.min(...vals) * 100) / 100;\n  const maxVal = Math.round(Math.max(...vals) * 100) / 100;\n  const buffer = Math.round((maxVal - minVal) * 100) / 1000;\n  statsFig3.y_range.end   = Math.min(maxVal + buffer, 1);\n  statsFig3.y_range.start = Math.max(minVal - buffer, 0);\n}\n\nfunction updateFig3(roundsPlayed, roundIsLastIter, itersToRun) {\n  /**\n  * Updates the data for Game Stats Figure 3.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{bool} roundIsLastIter -- Whether or not the iteration is the last one.\n  * @param{int} itersToRun -- The number of iterations total for the game.\n  */\n  //Store values for reference:\n  let fig3Data = statsFig3Src.data;\n  const ys = [\n    fig3Data['ll_ys'], fig3Data['lm_ys'], fig3Data['lr_ys'],\n    fig3Data['rl_ys'], fig3Data['rm_ys'], fig3Data['rr_ys']\n  ];\n\n  //Update plot points:\n  _fig3Iter(ys, roundsPlayed);\n\n  //Make final adjustments to graph on last iteration:\n  if(roundIsLastIter) { _fig3Adjust(fig3Data, itersToRun, ys); }\n\n  //Finalize changes:\n  statsFig3Src.change.emit();\n}\n\nfunction updateFig4(\n  roundsPlayed,\n  roundScoreChance,\n  kickerFoot,\n  kickerKick,\n  goalieAction\n) {\n  /**\n  * Updates the data for Game Stats Figure 4.\n  * @param{int} roundsPlayed -- The number of iterations played.\n  * @param{float} roundScoreChance -- The chance of scoring for the most\n  * recent iteration.\n  * @param{string} kickerFoot -- Either 'Left' or 'Right' signifying the kicker's\n  * footedness.\n  * @param{string} kickerKick -- Either 'Left', 'Middle', 'Right' signifying the\n  * kicker's kick direction.\n  * @param{string} goalieAction -- Either 'Left', 'Middle', 'Right' signifying\n  * the keeper's dive direction.\n  */\n  const fig4Data = statsFig4Src.data;\n  const index = roundsPlayed - 1;\n  fig4Data['ys'][index] = roundScoreChance;\n  fig4Data['feet'][index] = kickerFoot;\n  fig4Data['directions'][index] = kickerKick;\n  fig4Data['actions'][index] = goalieAction;\n\n  statsFig4Src.change.emit();\n}\n"},"id":"1537","type":"CustomJS"},{"attributes":{},"id":"1581","type":"StringFormatter"},{"attributes":{},"id":"1550","type":"BasicTickFormatter"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.95}},"id":"1409","type":"Line"},{"attributes":{"autosize_mode":"fit_columns","columns":[{"id":"1509"},{"id":"1510"},{"id":"1511"},{"id":"1512"},{"id":"1513"},{"id":"1514"},{"id":"1515"}],"fit_columns":false,"height":280,"sizing_mode":"stretch_width","source":{"id":"1508"},"view":{"id":"1518"},"visible":false},"id":"1516","type":"DataTable"},{"attributes":{},"id":"1551","type":"AllLabels"},{"attributes":{"source":{"id":"1356"}},"id":"1437","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.67}},"id":"1425","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1424"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1425"},"view":{"id":"1427"}},"id":"1426","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1356"}},"id":"1432","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.7}},"id":"1429","type":"Line"},{"attributes":{"js_property_callbacks":{"change:text":[{"id":"1527"}]},"text":"0","visible":false},"id":"1485","type":"Div"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.7}},"id":"1430","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1429"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1430"},"view":{"id":"1432"}},"id":"1431","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1356"}},"id":"1442","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.96}},"id":"1435","type":"Line"},{"attributes":{"js_property_callbacks":{"change:text":[{"id":"1528"}]},"text":"false","visible":false},"id":"1488","type":"Div"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.74}},"id":"1439","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.96}},"id":"1434","type":"Line"},{"attributes":{},"id":"1553","type":"BasicTickFormatter"},{"attributes":{"js_property_callbacks":{"change:text":[{"id":"1527"}]},"text":"1","visible":false},"id":"1486","type":"Div"},{"attributes":{"text_baseline":{"value":"ideographic"},"text_color":{"value":"whitesmoke"},"text_font_size":{"value":"15pt"},"x":{"field":"x"},"y":{"field":"y"},"y_offset":{"value":9}},"id":"1473","type":"Text"},{"attributes":{},"id":"1554","type":"AllLabels"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1439"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1440"},"view":{"id":"1442"}},"id":"1441","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1356"}},"id":"1447","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.6}},"id":"1444","type":"Line"},{"attributes":{"button_type":"success","disabled":true,"icon":null,"js_event_callbacks":{"button_click":[{"id":"1531"}]},"label":"Game Figure","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1493","type":"Button"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.6}},"id":"1445","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1444"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1445"},"view":{"id":"1447"}},"id":"1446","type":"GlyphRenderer"},{"attributes":{"end":500,"sizing_mode":"stretch_width","start":10,"step":10,"title":"Iterations To Run","value":50,"visible":false},"id":"1499","type":"Slider"},{"attributes":{"text":"0","visible":false},"id":"1479","type":"Div"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.72}},"id":"1449","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1454"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1455"},"view":{"id":"1457"}},"id":"1456","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.72}},"id":"1450","type":"Line"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1449"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1450"},"view":{"id":"1452"}},"id":"1451","type":"GlyphRenderer"},{"attributes":{"text":"Not Set","visible":false},"id":"1480","type":"Div"},{"attributes":{"source":{"id":"1356"}},"id":"1452","type":"CDSView"},{"attributes":{"text":"Score Chance Over Iterations","text_font_size":"16pt"},"id":"1337","type":"Title"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1262"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1263"},"view":{"id":"1265"}},"id":"1264","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1228"}},"id":"1270","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#AFC8AF"},"line_alpha":{"value":0.1},"line_color":{"value":"#96AF96"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"lr_ys"}},"id":"1263","type":"Scatter"},{"attributes":{"source":{"id":"1228"}},"id":"1265","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb3"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb3","transform":{"id":"1234"}}},"id":"1268","type":"Rect"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rr_ys"}},"id":"1328","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb3"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb3","transform":{"id":"1234"}}},"id":"1267","type":"Rect"},{"attributes":{},"id":"1562","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1399"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1400"},"view":{"id":"1402"}},"id":"1401","type":"GlyphRenderer"},{"attributes":{},"id":"1563","type":"AllLabels"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1267"},"hover_glyph":null,"muted_glyph":null,"name":"3","nonselection_glyph":{"id":"1268"},"view":{"id":"1270"}},"id":"1269","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"#AFC8C8"},"line_color":{"value":"#96AFAF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rl_ys"}},"id":"1272","type":"Scatter"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1272"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1273"},"view":{"id":"1275"}},"id":"1274","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#AFC8C8"},"line_alpha":{"value":0.1},"line_color":{"value":"#96AFAF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rl_ys"}},"id":"1273","type":"Scatter"},{"attributes":{"source":{"id":"1228"}},"id":"1280","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb4"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb4","transform":{"id":"1236"}}},"id":"1277","type":"Rect"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb4","transform":{"id":"1236"}}},"id":"1278","type":"Rect"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1327"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1328"},"view":{"id":"1330"}},"id":"1329","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1277"},"hover_glyph":null,"muted_glyph":null,"name":"2","nonselection_glyph":{"id":"1278"},"view":{"id":"1280"}},"id":"1279","type":"GlyphRenderer"},{"attributes":{"fill_color":{"value":"#AFAFC8"},"line_color":{"value":"#9696AF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rm_ys"}},"id":"1282","type":"Scatter"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1239"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1239"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rr_ys"}},"id":"1327","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#AFAFC8"},"line_alpha":{"value":0.1},"line_color":{"value":"#9696AF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rm_ys"}},"id":"1283","type":"Scatter"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.6}},"id":"1399","type":"Line"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1282"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1283"},"view":{"id":"1285"}},"id":"1284","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1228"}},"id":"1290","type":"CDSView"},{"attributes":{},"id":"1565","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1322"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1323"},"view":{"id":"1325"}},"id":"1324","type":"GlyphRenderer"},{"attributes":{},"id":"1566","type":"AllLabels"},{"attributes":{"source":{"id":"1228"}},"id":"1285","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb5"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb5","transform":{"id":"1238"}}},"id":"1288","type":"Rect"},{"attributes":{"source":{"id":"1228"}},"id":"1325","type":"CDSView"},{"attributes":{"fill_color":{"value":"#C8AFC8"},"line_color":{"value":"#AF96AF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rr_ys"}},"id":"1292","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb5"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb5","transform":{"id":"1238"}}},"id":"1287","type":"Rect"},{"attributes":{"source":{"id":"1356"}},"id":"1402","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#C8AFC8"},"line_alpha":{"value":0.1},"line_color":{"value":"#AF96AF"},"marker":{"value":"circle_dot"},"size":{"value":5},"x":{"field":"xs"},"y":{"field":"rr_ys"}},"id":"1293","type":"Scatter"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1287"},"hover_glyph":null,"muted_glyph":null,"name":"1","nonselection_glyph":{"id":"1288"},"view":{"id":"1290"}},"id":"1289","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"field":"highlight_alphas","transform":{"id":"1237"}},"fill_color":{"value":"#000000"},"line_alpha":{"field":"highlight_alphas","transform":{"id":"1237"}},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rm_ys"}},"id":"1322","type":"Scatter"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1292"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1293"},"view":{"id":"1295"}},"id":"1294","type":"GlyphRenderer"},{"attributes":{"source":{"id":"1228"}},"id":"1320","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rm_ys"}},"id":"1323","type":"Scatter"},{"attributes":{"source":{"id":"1228"}},"id":"1295","type":"CDSView"},{"attributes":{"source":{"id":"1228"}},"id":"1330","type":"CDSView"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#000000"},"line_alpha":{"value":0.1},"line_color":{"value":"#000000"},"marker":{"value":"circle_dot"},"size":{"value":10},"x":{"field":"xs"},"y":{"field":"rl_ys"}},"id":"1318","type":"Scatter"},{"attributes":{"fill_alpha":{"value":0},"fill_color":{"value":"#1f77b4"},"height":{"field":"hb6"},"line_alpha":{"value":0},"line_color":{"value":"#1f77b4"},"width":{"value":1},"x":{"field":"xs"},"y":{"field":"hb6","transform":{"id":"1240"}}},"id":"1297","type":"Rect"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.6}},"id":"1400","type":"Line"},{"attributes":{"callback":null,"formatters":{"@ll_ys":{"id":"1332"},"@lm_ys":{"id":"1333"},"@xs":{"id":"1331"}},"point_policy":"follow_mouse","renderers":[{"id":"1249"},{"id":"1259"},{"id":"1269"},{"id":"1279"},{"id":"1289"},{"id":"1299"}],"tooltips":"\n&lt;div&gt;\n  &lt;font size=\"1pt\"&gt;&lt;p&gt;Iteration: @xs{custom}&lt;br&gt;\nRisk: @ll_ys{custom}&lt;br&gt;\nRisk SFKA: @lm_ys{custom}&lt;/p&gt;&lt;/font&gt;\n&lt;/div&gt;\n"},"id":"1334","type":"HoverTool"},{"attributes":{"button_type":"success","icon":null,"js_event_callbacks":{"button_click":[{"id":"1532"}]},"label":"Figure 1","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1494","type":"Button"},{"attributes":{"data_source":{"id":"1228"},"glyph":{"id":"1317"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1318"},"view":{"id":"1320"}},"id":"1319","type":"GlyphRenderer"},{"attributes":{"args":{"selectedIndex":{"id":"1227"},"src":{"id":"1228"}},"code":"\nconst index = special_vars.index;\nconst name = special_vars.name;\nconst data = src.data;\n\n\nconst column = ['ll', 'lm', 'lr', 'rl', 'rm', 'rr'];\nreturn column[parseInt(selectedIndex.text)];\n"},"id":"1333","type":"CustomJSHover"},{"attributes":{"args":{"selectedIndex":{"id":"1227"},"src":{"id":"1228"}},"code":"\nconst index = special_vars.index;\nconst name = special_vars.name;\nconst data = src.data;\n\n\nconst column = ['ll', 'lm', 'lr', 'rl', 'rm', 'rr'];\nconst selected = column[parseInt(selectedIndex.text)];\n\nreturn data[`${selected}_ys`][index].toString().substring(0, 5);\n"},"id":"1332","type":"CustomJSHover"},{"attributes":{"formatter":{"id":"1574"},"major_label_policy":{"id":"1575"},"ticker":{"id":"1348"}},"id":"1347","type":"LinearAxis"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.74}},"id":"1395","type":"Line"},{"attributes":{},"id":"1343","type":"LinearScale"},{"attributes":{"end":50.5,"start":0.5},"id":"1339","type":"Range1d"},{"attributes":{},"id":"1345","type":"LinearScale"},{"attributes":{},"id":"1348","type":"BasicTicker"},{"attributes":{"start":0.5},"id":"1341","type":"Range1d"},{"attributes":{"formatter":{"id":"1571"},"major_label_policy":{"id":"1572"},"ticker":{"id":"1352"}},"id":"1351","type":"LinearAxis"},{"attributes":{"axis":{"id":"1347"},"grid_line_color":"black","ticker":null,"visible":false},"id":"1350","type":"Grid"},{"attributes":{"axis":{"id":"1351"},"dimension":1,"grid_line_color":"black","ticker":null,"visible":false},"id":"1354","type":"Grid"},{"attributes":{},"id":"1352","type":"BasicTicker"},{"attributes":{"active_multi":null,"tools":[{"id":"1470"}]},"id":"1355","type":"Toolbar"},{"attributes":{"source":{"id":"1356"}},"id":"1392","type":"CDSView"},{"attributes":{"data":{"actions":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"avgs_placeholder":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"directions":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"feet":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"highlight_alphas":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"xs":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"ys":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"selected":{"id":"1628"},"selection_policy":{"id":"1627"}},"id":"1356","type":"ColumnDataSource"},{"attributes":{"sizing_mode":"stretch_width","text":"Chances cannot be greater than 1","visible":false},"id":"1483","type":"Div"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1394"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1395"},"view":{"id":"1397"}},"id":"1396","type":"GlyphRenderer"},{"attributes":{"button_type":"success","icon":null,"label":"Fast Forward","sizing_mode":"scale_width","visible":false,"width_policy":"fit"},"id":"1498","type":"Toggle"},{"attributes":{"source":{"id":"1356"}},"id":"1397","type":"CDSView"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.74}},"id":"1394","type":"Line"},{"attributes":{"js_property_callbacks":{"change:value":[{"id":"1538"}]},"sizing_mode":"stretch_width","title":"Right-Footed Kicker Kicking to the Right Selection Chance","value":"0","visible":false},"id":"1506","type":"TextInput"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.93}},"id":"1390","type":"Line"},{"attributes":{"sizing_mode":"stretch_width","text":"Select A CPU Strategy From the Dropdown","visible":false},"id":"1481","type":"Div"},{"attributes":{"data_source":{"id":"1356"},"glyph":{"id":"1389"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1390"},"view":{"id":"1392"}},"id":"1391","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#000000","x":{"field":"xs"},"y":{"value":0.93}},"id":"1389","type":"Line"}],"root_ids":["1739"]},"title":"Bokeh Application","version":"2.3.2"}}
        </script>
        <script type="text/javascript">
          (function() {
            var fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  var docs_json = document.getElementById('3001').textContent;
                  var render_items = [{"docid":"dce3c7f4-2084-4b08-ac63-e1708c3c71ef","root_ids":["1739"],"roots":{"1739":"741bbcb6-f2c3-4b1c-aa3d-664b1370f6c3"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    var attempts = 0;
                    var timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>